!function($){"use strict";$.WS_Form.prototype.set_is_admin=function(){return!1},$.WS_Form.prototype.init=function(){this.data_cache_build(),this.set_globals()},$.WS_Form.prototype.init_after_get_submit=function(e){$.WS_Form.debug_rendered&&(!1!==this.submit_auto_populate&&this.log("debug_action_get",this.submit_auto_populate.action_label),!1!==this.submit&&this.log("debug_submit_loaded")),this.form_build()},$.WS_Form.prototype.set_globals=function(){this.framework_id=$.WS_Form.settings_plugin.framework,this.framework=$.WS_Form.frameworks.types[this.framework_id],this.framework_fields=this.framework.fields.public,this.invalid_feedback_mask_placeholder="",void 0!==$.WS_Form.meta_keys.invalid_feedback&&void 0!==$.WS_Form.meta_keys.invalid_feedback.p&&(this.invalid_feedback_mask_placeholder=$.WS_Form.meta_keys.invalid_feedback.p),this.form_action_custom=this.form_obj.attr("action")!=ws_form_settings.url+"submit";var e=void 0!==this.framework.fields.public.class_form_validated?this.framework.fields.public.class_form_validated:[];this.class_validated=e.join(" "),"function"==typeof this.debug&&this.debug(),this.hash_set(this.cookie_get("hash",""),!0);var t=this;""!=this.hash?$.WS_Form.this.api_call("submit/hash/"+this.hash,"GET",!1,function(e){t.submit=e.data,t.init_after_get_submit(!0),t.submit=!1},function(e){t.read_json_populate(),t.init_after_get_submit(!1)}):(this.read_json_populate(),this.init_after_get_submit(!1))},$.WS_Form.prototype.read_json_populate=function(){"undefined"!=typeof wsf_form_json_populate&&void 0!==wsf_form_json_populate[this.form_id]&&(this.submit_auto_populate=wsf_form_json_populate[this.form_id])},$.WS_Form.prototype.log=function(e,t,a){if(void 0===t)t="";if(void 0===a)a="";return!!$.WS_Form.debug_rendered&&this.debug_audit_add("log",this.language(e).replace(/%s/g,t),a)},$.WS_Form.prototype.error=function(e,t,a){if(void 0===t)t="";if(void 0===a)a="";return!!$.WS_Form.debug_rendered&&this.debug_audit_add("error",this.language(e).replace(/%s/g,t),a)},$.WS_Form.prototype.form_render=function(){this.form_timer();var e=[];if(void 0!==this.form.meta.action&&void 0!==this.form.meta.action.groups&&void 0!==this.form.meta.action.groups[0]&&void 0!==this.form.meta.action.groups[0].rows)for(var t in this.form.meta.action.groups[0].rows)this.form.meta.action.groups[0].rows.hasOwnProperty(t)&&this.form.meta.action.groups[0].rows[t]&&void 0!==this.form.meta.action.groups[0].rows[t].id&&void 0!==this.form.meta.action.groups[0].rows[t].disabled&&"on"!=this.form.meta.action.groups[0].rows[t].disabled&&null!==this.form.meta.action.groups[0].rows[t].id&&e.push(this.form.meta.action.groups[0].rows[t].id.toString());this.conditional_actions_run_save=e,this.conditional_actions_run_submit=e,this.conditional_actions_changed=!1,this.recaptchas=[],this.recaptchas_v2_default=[],this.recaptchas_v2_invisible=[],this.recaptchas_v3_default=[],this.recaptchas_conditions=[],this.signatures=[],this.signatures_by_name=[],this.form_init_js(),this.form_tabs(),this.form_analytics(),this.form_navigation(),this.form_validation(),this.form_select_all(),this.form_cascade(),this.form_date(),this.form_color(),this.form_signature(),this.form_recaptcha(),this.form_legal(),this.form_rating(),this.form_section_icons(),this.form_file(),this.form_conditional(),this.form_progress(),this.form_input_range(),this.form_textarea(),this.form_section_repeatable(!1,!0,!0),this.form_required(),this.form_inputmask(),this.form_checkbox_min_max(),this.form_select_min_max(),this.form_character_word_count(),this.form_spam_protection(),this.form_tracking(),this.form_password_strength_meter(),this.form_ecommerce(),this.form_calc(),this.form_credit_card(),this.form_preview(),this.form_stat(),this.trigger("rendered"),this.form_validate_real_time(),this.log("debug_form_rendered")},$.WS_Form.prototype.form_timer=function(){this.date_start=this.cookie_get("date_start",!1),(!1===this.date_start||isNaN(this.date_start)||""==this.date_start)&&(this.date_start=(new Date).getTime(),this.cookie_set("date_start",this.date_start,!1))},$.WS_Form.prototype.trigger=function(e){var t="wsf-"+e;$(document).trigger(t,[this.form,this.form_id,this.form_instance_id,this.form_obj,this.form_canvas_obj]),this.log("log_trigger",t,"event");var a="wsf-"+e+"-instance-"+this.form_instance_id;$(window).trigger(a);var i="wsf-"+e+"-form-"+this.form_id;$(window).trigger(i)},$.WS_Form.prototype.form_init_js=function(){if(void 0!==this.framework.init_js){var e={form_canvas_selector:"#"+this.form_obj_id},t=this.mask_parse(this.framework.init_js,e);$.globalEval("(function($) { $(function() {"+t+"}) })(jQuery);")}},$.WS_Form.prototype.form_reset=function(e){for(var t in this.trigger("reset-before"),this.form_obj.removeClass(this.class_validated),this.form_obj[0].reset(),this.field_data_cache)if(this.field_data_cache.hasOwnProperty(t)){var a=this.field_data_cache[t];if(this.get_field_value_fallback(a.type,!1,"submit_save",!1)){a.id;var i="#"+this.form_id_prefix+"field-"+a.id;switch(a.type){case"textarea":var r=$(i,this.form_canvas_obj).val();this.textarea_set_value($(i,this.form_canvas_obj),r),$(i,this.form_canvas_obj).trigger("change")}var o=$.WS_Form.field_type_cache[a.type],s=void 0!==o.trigger?o.trigger:"change";$(i,this.form_canvas_obj).trigger(s)}}this.signatures_clear(),this.recaptcha_reset(),this.form_conditional(),this.trigger("reset-complete")},$.WS_Form.prototype.form_clear=function(){for(var e in this.trigger("clear-before"),this.form_obj.removeClass(this.class_validated),this.field_data_cache)if(this.field_data_cache.hasOwnProperty(e)){var t=this.field_data_cache[e];if(this.get_field_value_fallback(t.type,!1,"submit_save",!1)){var a=t.id,i="#"+this.form_id_prefix+"field-"+t.id,r=this.field_name_prefix+a;switch(t.type){case"checkbox":case"price_checkbox":case"radio":case"price_radio":var o=$('[name="'+r+'[]"]',this.form_canvas_obj).is(":checked");$('[name="'+r+'[]"]',this.form_canvas_obj).prop("checked",!1);break;case"select":case"price_select":o=""!=$('[name="'+r+'[]"]',this.form_canvas_obj).val();$('[name="'+r+'[]"]',this.form_canvas_obj).val("");break;case"textarea":o=""!=$(i,this.form_canvas_obj).val();$(i,this.form_canvas_obj).val(""),this.textarea_set_value($(i,this.form_canvas_obj),"");break;case"color":o=""!=$(i,this.form_canvas_obj).val();$(i,this.form_canvas_obj).val("#000000");break;default:o=""!=$(i,this.form_canvas_obj).val();$(i,this.form_canvas_obj).val("")}if(o){var s=$.WS_Form.field_type_cache[t.type],_=void 0!==s.trigger?s.trigger:"change";$(i,this.form_canvas_obj).trigger(_)}}}this.signatures_clear(),this.recaptcha_reset(),this.form_conditional(),this.trigger("clear-complete")},$.WS_Form.prototype.form_reload=function(){var e=this;""!=this.hash?$.WS_Form.this.api_call("submit/hash/"+this.hash,"GET",!1,function(t){e.submit=t.data,e.form_reload_after_get_submit(!0),e.submit=!1},function(t){e.form_reload_after_get_submit(!1)}):(this.submit=!1,this.form_reload_after_get_submit(!1))},$.WS_Form.prototype.form_reload_after_get_submit=function(e){$('[data-wsf-message][data-wsf-instance-id="'+this.form_instance_id+'"]').remove(),this.form_canvas_obj.show(),this.form_canvas_obj.removeClass(this.class_validated),this.form_validation_real_time_hooks=[],this.form_canvas_obj.empty(),this.form_build()},$.WS_Form.prototype.form_hash_clear=function(){this.hash="",this.cookie_clear("hash"),$.WS_Form.debug_rendered&&(this.debug_info("debug_info_hash",this.language("debug_hash_empty")),this.debug_info("debug_info_submit_count",0)),this.log("log_hash_clear")},$.WS_Form.prototype.form_password_strength_meter=function(){var e=this;if("undefined"!=typeof wp&&void 0!==wp.passwordStrength&&void 0!==wp.passwordStrength.meter){var t=$("[data-password-strength-meter]:not([data-init-password-strength-meter])",this.form_canvas_obj);t.each(function(){$(this).attr("data-init-password-strength-meter","");var t=$(this).closest("[data-type]"),a=t.attr("data-id"),i=t.attr("data-repeatable-index"),r=void 0!==i?"-repeat-"+i:"",o=$("#"+e.form_id_prefix+"invalid-feedback-"+a+r,e.form_canvas_obj),s=e.get_field_value_fallback("password",!1,"class_help",[]).join(" "),_='<div id="'+e.form_id_prefix+"password-strength-meter-"+a+r+'" class="'+s+'"></div>';o.length?$(_,this.form_canvas_obj).insertBefore(o):t.append(_),e.form_password_strength_meter_process($(this))}),t.keyup(function(){e.form_password_strength_meter_process($(this))})}},$.WS_Form.prototype.form_password_strength_meter_process=function(e){var t=e.closest("[data-type]"),a=t.attr("data-id"),i=t.attr("data-repeatable-index"),r=void 0!==i?"-repeat-"+i:"",o=$("#"+this.form_id_prefix+"field-"+a+r,t).val(),s=$("#"+this.form_id_prefix+"password-strength-meter-"+a+r,t);if(!o)return s.html(""),void e.attr("data-password-strength-meter","");var _=wp.passwordStrength.meter(o,wp.passwordStrength.userInputBlacklist(),o),n=this.get_framework_config_value("message","types");for(var c in n)n.hasOwnProperty(c)&&void 0!==n[c]&&void 0!==n[c].text_class&&s.removeClass(n[c].text_class);switch(_){case 2:c="danger";s.html(this.language("password_strength_bad"));break;case 3:c="warning";s.html(this.language("password_strength_good"));break;case 4:c="success";s.html(this.language("password_strength_strong"));break;case 5:c="danger";s.html(this.language("password_strength_short"));break;default:c="danger";s.html(this.language("password_strength_short"))}e.attr("data-password-strength-meter",c),void 0!==n[c]&&void 0!==n[c].text_class&&s.addClass(n[c].text_class)},$.WS_Form.prototype.form_calc_clean=function(){for(var e in this.calc)if(this.calc.hasOwnProperty(e)){var t=this.calc[e],a=this.get_part_id(t.field.id,t.section_repeatable_index,"field-wrapper");if(!$("#"+a,this.form_canvas_obj).length)return this.calc.splice(e,1),void this.form_calc_clean()}},$.WS_Form.prototype.form_calc=function(e,t){if(void 0===e)e=!1;if(void 0===t)t=!1;for(var a in this.calc)if(this.calc.hasOwnProperty(a)){var i=this.calc[a];if(!1!==t){if(-1!==i.value.indexOf("#section_row_count")){this.form_calc_do(i,"#section_row_count");continue}if(i.field.section_id===t){this.form_calc_do(i,i.field.id);continue}if(!1===i.section_repeatable_index)for(var r in i.field_ids_touched)if(i.field_ids_touched.hasOwnProperty(r)){var o=i.field_ids_touched[r],s=this.field_data_cache[o];(void 0!==s.section_repeatable_section_id&&s.section_repeatable_section_id)===t&&this.form_calc_do(i,o)}}else if(!1!==e){var _=$("#"+e,this.form_canvas_obj).closest("[data-id]"),n=parseInt(_.attr("data-id"));if(n===i.field.id&&"value"==i.type)continue;var c=i.field_ids_touched;c.length>0&&-1!==c.indexOf(n)&&this.form_calc_do(i,n)}else this.form_calc_do(i,this.language("log_calc_init"))}},$.WS_Form.prototype.form_calc_do=function(e,t){if(this.log("log_calc_fired",e.field.label+" - "+e.value+" ("+this.language("log_calc_fired_triggered",t)+")","calc"),void 0!==$.WS_Form.field_type_cache[e.field.type]){var a=$.WS_Form.field_type_cache[e.field.type];if(a.calc_in,a.calc_in){var i=this.parse_variables_process(e.value,e.section_repeatable_index,!0,e.field).output;switch(e.type){case"field_text_editor":var r=this.get_part_id(e.field.id,e.section_repeatable_index,"field-wrapper");(c=$("[data-text-editor]",$("#"+r,this.form_canvas_obj))).html(i);break;case"field_html":r=this.get_part_id(e.field.id,e.section_repeatable_index,"field-wrapper");(c=$("[data-html]",$("#"+r,this.form_canvas_obj))).html(i);break;case"field_label":var o=this.get_part_id(e.field.id,e.section_repeatable_index,"label");(c=$("#"+o,this.form_canvas_obj)).html(i);break;case"field_help":var s=this.get_part_id(e.field.id,e.section_repeatable_index,"help");(c=$("#"+s,this.form_canvas_obj)).html(i);break;case"field_placeholder":var _=this.get_part_id(e.field.id,e.section_repeatable_index);(c=$("#"+_,this.form_canvas_obj)).attr("placeholder",i);break;case"field_value":var n=this.get_part_id(e.field.id,e.section_repeatable_index),c=$("#"+n,this.form_canvas_obj),d=l=h=!1;switch(e.field.type){case"progress":case"range":case"price_range":i=this.get_number(i,0,!1);d=void 0!==c.attr("min")?c.attr("min"):0;var l=void 0!==c.attr("max")?c.attr("max"):100,h=void 0!==c.attr("step")?c.attr("step"):1;break;case"price":case"price_subtotal":case"cart_price":case"number":case"quantity":case"wc_quantity":i=this.get_number(i,0,!1);d=void 0!==c.attr("min")?c.attr("min"):d,l=void 0!==c.attr("max")?c.attr("max"):l,h=void 0!==c.attr("step")?c.attr("step"):h;break;case"datetime":if(this.get_number(i,0),i>0){var f=c.attr("data-date-format")?c.attr("data-date-format"):ws_form_settings.date_format,m=c.attr("data-time-format")?c.attr("data-time-format"):ws_form_settings.time_format;switch(c.attr("data-date-type")){case"date":var p=f;break;case"time":p=m;args.step=15;break;case"month":p="F Y";break;case"week":p="\\W\\e\\e\\k W, Y";break;default:p=f+" "+m}i=this.date_format(new Date(1e3*i),p)}else i=""}switch(!1!==d&&i<d&&(i=d),!1!==l&&i>l&&(i=l),!1!==h&&(i=this.get_number_to_step(i,h)),e.field.type){case"price":case"price_range":case"price_subtotal":case"cart_price":var v=this.get_number(c.val(),0,!0)!==i;i=this.get_price(i);break;case"progress":case"range":case"number":case"quantity":case"wc_quantity":v=this.get_number(c.val(),0,!1)!==i;break;default:v=c.val()!==i}switch(e.field.type){case"progress":this.form_progress_set_value(c,i);break;default:c.val(i),i==c.val()&&v&&c.trigger("change")}}}else this.error("error_parse_variable_syntax_error_calc_in","ID: "+e.field.id,"parse-variables")}},$.WS_Form.prototype.form_ecommerce=function(){var e=this;if(this.has_ecommerce=$("[data-ecommerce-price],[data-ecommerce-cart-price],[data-ecommerce-cart-total],[data-ecommerce-payment]",this.form_canvas_obj).length,this.has_ecommerce){for(var t in $.WS_Form.ecommerce.cart_price_types)$.WS_Form.ecommerce.cart_price_types.hasOwnProperty(t)&&this.form_add_hidden_input("wsf_ecommerce_cart["+t+"]","",e.form_id_prefix+"ecommerce-cart-"+t);this.form_add_hidden_input("wsf_ecommerce_cart[total]","",e.form_id_prefix+"ecommerce-cart-total"),this.form_add_hidden_input("wsf_ecommerce_transaction","",e.form_id_prefix+"ecommerce-transaction"),this.form_add_hidden_input("wsf_ecommerce_transaction_id","",e.form_id_prefix+"ecommerce-transaction-id"),this.form_add_hidden_input("wsf_ecommerce_status","",e.form_id_prefix+"ecommerce-status"),this.form_add_hidden_input("wsf_ecommerce_payment_method","",e.form_id_prefix+"ecommerce-payment-method"),this.form_ecommerce_set_status("new"),this.ecommerce_cart_price_type=[],$('input[type="text"][data-ecommerce-price],input[data-ecommerce-cart-price],input[data-ecommerce-cart-total]',this.form_canvas_obj).each(function(){var t=e.get_currency(),a={digits:t.decimals,allowMinus:$(this)[0].hasAttribute("data-ecommerce-negative"),suffix:t.suffix,groupSeparator:t.thousand_separator,radixPoint:t.decimal_separator,prefix:t.prefix,removeMaskOnSubmit:!0,rightAlign:!1,clearMaskOnLostFocus:!1};$(this)[0].hasAttribute("data-ecommerce-min")&&(a.min=$(this).attr("data-ecommerce-min")),$(this)[0].hasAttribute("data-ecommerce-max")&&(a.max=$(this).attr("data-ecommerce-max")),void 0!==$(this).inputmask&&$(this).inputmask("currency",a)}),$("input[data-ecommerce-price]:not([data-init-ecommerce-event]),input[data-ecommerce-cart-price]:not([data-init-ecommerce-event]),select[data-ecommerce-price]:not([data-init-ecommerce-event])",this.form_canvas_obj).on("change input keyup",function(t){if($(this).attr("data-init-ecommerce-event",""),void 0!==$(this).attr("min")){var a=parseInt($(this).attr("min"));"input"==t.type&&parseInt($(this).val())<a&&$(this).val(a)}if(void 0!==$(this).attr("max")){var i=parseInt($(this).attr("max"));"input"==t.type&&parseInt($(this).val())>i&&$(this).val(i)}e.form_ecommerce_calculate()}),$("input[data-ecommerce-quantity]:not([data-init-ecommerce-event])",this.form_canvas_obj).on("change input keyup",function(t){if($(this).attr("data-init-ecommerce-event",""),"change"==t.type&&""==$(this).val()&&$(this).val(0),void 0!==$(this).attr("min")){var a=parseInt($(this).attr("min"));"input"==t.type&&parseInt($(this).val())<a&&$(this).val(a)}if(void 0!==$(this).attr("max")){var i=parseInt($(this).attr("max"));"input"==t.type&&parseInt($(this).val())>i&&$(this).val(i)}e.form_ecommerce_calculate()}),this.form_ecommerce_calculate()}},$.WS_Form.prototype.form_ecommerce_calculate=function(){if(this.form_ecommerce_calculate_enabled){var e=[],t=0,a=this.get_currency(),i=[],r=this;for(var o in $("input[data-ecommerce-price]:not([data-ecommerce-price-bypass]),select[data-ecommerce-price]:not([data-ecommerce-price-bypass])",this.form_canvas_obj).each(function(){var e=$(this).closest("[data-id]"),t=e.attr("data-id"),a=e.attr("data-repeatable-index"),o=t+(void 0!==a?"-"+a:""),s=$(this).closest("[data-ecommerce-cart-price-type]");switch(s=s.length?s.attr("data-ecommerce-cart-price-type"):"subtotal",void 0===i[o]&&(i[o]={subtotal:0,type:s,field_id:t,field_repeatable_index:a}),$(this).attr("type")){case"checkbox":case"radio":i[o].subtotal+=$(this).is(":checked")?r.get_number($(this).attr("data-price"),0,!1):0;break;default:$(this).is("select")?$(this).children("option:selected").each(function(){i[o].subtotal+=r.get_number($(this).attr("data-price"),0,!1)}):i[o].subtotal+=r.get_number($(this).val())}}),i)if(i.hasOwnProperty(o)){var s=i[o].field_id,_=i[o].field_repeatable_index,n=i[o].subtotal,c=i[o].type;if(void 0===_)var d=$('input[data-ecommerce-quantity][data-ecommerce-field-id="'+s+'"]',this.form_canvas_obj);else d=$('[data-repeatable-index="'+_+'"] input[data-ecommerce-quantity][data-ecommerce-field-id="'+s+'"]',this.form_canvas_obj);if(d.length)n*=this.get_number(d.first().val());if(void 0===_)var l=$('input[data-ecommerce-price-subtotal][data-ecommerce-field-id="'+s+'"]',this.form_canvas_obj);else l=$('[data-repeatable-index="'+_+'"] input[data-ecommerce-price-subtotal][data-ecommerce-field-id="'+s+'"]',this.form_canvas_obj);var h=this.get_number(l.val(),0,!0)!=this.get_number(n,0,!1);l.val(this.get_price(n,a)),h&&l.trigger("change"),void 0===e[c]&&(e[c]=0),e[c]+=n}for(var c in $.WS_Form.ecommerce.cart_price_types)if($.WS_Form.ecommerce.cart_price_types.hasOwnProperty(c)){var f=$.WS_Form.ecommerce.cart_price_types[c];if(void 0===f.sum||f.sum){if("subtotal"==c)var m=void 0!==e[c]?e[c]:0;else m=this.get_number($("input[data-ecommerce-cart-price-"+c+"]",this.form_canvas_obj).val());var p=this.get_price(m,a,!1),v=this.get_price(m,a),u="[data-ecommerce-cart-price-"+c+"]",b="#"+this.form_id_prefix+"ecommerce-cart-"+c;this.form_ecommerce_price_type_set(c,u,b,m,p,v),t+=m}}p=this.get_price(t,a,!1),v=this.get_price(t,a);this.ecommerce_cart_price_type.total={float:t,string:p,currency:v};u="[data-ecommerce-cart-total]",b="#"+this.form_id_prefix+"ecommerce-cart-total";this.form_ecommerce_price_type_set(!1,u,b,t,p,v)}},$.WS_Form.prototype.form_ecommerce_price_type_set=function(e,t,a,i,r,o){var s=this;(_=$(t,this.form_canvas_obj)).each(function(){if($(this).is("input")){var e=s.get_number($(this).val(),0,!0)!=s.get_number(o,0);$(this).val(r),e&&$(this).trigger("change")}if($(this).is("span")){var t=void 0!==$(this).attr("data-ecommerce-price-currency")?o:r;$(this).html(t)}});var _=$(a,this.form_canvas_obj),n=s.get_number(_.val(),0,!1)!=s.get_number(i,0,!1);_.val(i),n&&_.trigger("change"),!1!==e&&(this.ecommerce_cart_price_type[e]={float:i,string:r,currency:o})},$.WS_Form.prototype.form_ecommerce_payment_error=function(e){this.error("error_payment",e,"payment")},$.WS_Form.prototype.form_ecommerce_payment_process=function(e,t,a){this.form_ecommerce_set_status("completed"),this.form_ecommerce_set_transaction_id(e),this.form_ecommerce_set_payment_method(a),this.form_ecommerce_set_payment_amount(t),this.form_obj.submit()},$.WS_Form.prototype.form_ecommerce_set_status=function(e){$("#"+this.form_id_prefix+"ecommerce-status",this.form_canvas_obj).val(e),this.log("log_ecommerce_status",e,"ecommerce")},$.WS_Form.prototype.form_ecommerce_set_transaction_id=function(e){$("#"+this.form_id_prefix+"ecommerce-transaction-id",this.form_canvas_obj).val(e),this.log("log_ecommerce_transaction_id",e,"ecommerce")},$.WS_Form.prototype.form_ecommerce_set_transaction=function(e){$("#"+this.form_id_prefix+"ecommerce-transaction",this.form_canvas_obj).val(e)},$.WS_Form.prototype.form_ecommerce_set_payment_method=function(e){$("#"+this.form_id_prefix+"ecommerce-payment-method",this.form_canvas_obj).val(e),this.log("log_ecommerce_payment_method",e,"ecommerce")},$.WS_Form.prototype.form_ecommerce_set_payment_amount=function(e){this.form_ecommerce_calculate_enabled=!1,$("#"+this.form_id_prefix+"ecommerce-cart-total",this.form_canvas_obj).val(e).trigger("change"),this.log("log_ecommerce_payment_amount",e,"ecommerce")},$.WS_Form.prototype.form_credit_card=function(){$("input[data-credit-card]:not([data-init-credit-card])",this.form_canvas_obj).each(function(){$(this).attr("data-init-credit-card",""),$(this).on("input",function(){if(void 0!==$(this).inputmask){var e,t=$(this).val().replace(/\D/g,"");e=/^3[47]\d{0,13}$/.test(t)?"9999 999999 99999":/^3(?:0[0-5]|[68]\d)\d{0,11}$/.test(t)?"9999 999999 9999":/^\d{0,16}$/.test(t)?"9999 9999 9999 9999":"remove",$(this).attr("data-currentmask")!=e&&($(this).attr("data-currentmask",e),$(this).inputmask(e,{placeholder:"",clearMaskOnLostFocus:!1}))}})})},$.WS_Form.prototype.form_file=function(){var e=this;$('input[type="file"]:not([data-init-file])',this.form_canvas_obj).each(function(){$(this).change(function(){var t=$(this).closest('[data-type="file"]'),a=t.attr("data-id"),i=t.attr("data-repeatable-index"),r=void 0!==i?"-repeat-"+i:"",o=$(this)[0].files,s=$("#"+e.form_id_prefix+"label-"+a+r,this.form_canvas_obj);if(void 0!==s.attr("data-label-target"))switch(s.attr("data-label-target")){case"span":s=$("span",s).first()}if(0==o.length)var _=e.field_data_cache[a].label;else{for(var n=[],c=0;c<o.length;c++)n.push(o[c].name);_=n.join(", ")}s.html(e.html_encode(_))}),$(this).attr("data-init-file","")})},$.WS_Form.prototype.file_get_count_by_field_id=function(e){var t=$("#"+this.form_id_prefix+"field-"+e,this.form_canvas_obj),a=!!t.length&&t[0].files;return!1!==a?a.length:0},$.WS_Form.prototype.form_navigation=function(){var e=this,t=this.form.groups.length;$('[data-action="wsf-save"]:not([data-init-navigation])',this.form_canvas_obj).each(function(){$(this).attr("data-init-navigation",""),$(this).click(function(){e.form_post("save")})}),$('[data-action="wsf-tab_next"]:not([data-init-navigation])',this.form_canvas_obj).each(function(){if($(this).attr("data-init-navigation",""),1==t)return $(this).attr("disabled",""),!0;var a=e.get_group_index($(this));return!1===a||(a==t-1?($(this).attr("disabled",""),!0):void $(this).click(function(){void 0===$(this).attr("disabled")&&e.group_index_offset($(this),1)}))}),$('[data-action="wsf-tab_previous"]:not([data-init-navigation])',this.form_canvas_obj).each(function(){if($(this).attr("data-init-navigation",""),1==t)return $(this).attr("disabled",""),!0;var a=e.get_group_index($(this));return!1===a||(0==a?($(this).attr("disabled",""),!0):void $(this).click(function(){void 0===$(this).attr("disabled")&&e.group_index_offset($(this),-1)}))}),$('[data-action="wsf-reset"]:not([data-init-navigation])',this.form_canvas_obj).each(function(){$(this).attr("data-init-navigation",""),$(this).click(function(t){t.preventDefault(),t.stopPropagation(),e.form_reset()})}),$('[data-action="wsf-clear"]:not([data-init-navigation])',this.form_canvas_obj).each(function(){$(this).attr("data-init-navigation",""),$(this).click(function(){e.form_clear()})})},$.WS_Form.prototype.group_index_offset=function(e,t){var a=this.get_group_index(e)+t;this.group_index_set(a);var i=e.closest("[data-id]").attr("data-id"),r=this.field_data_cache[i],o=this.get_object_meta_value(r,"scroll_to_top",""),s=this.get_object_meta_value(r,"scroll_to_top_offset","0");s=""==s?0:parseInt(s);var _=this.form_canvas_obj.offset().top-s;switch(o){case"instant":$("html,body").scrollTop(_);break;case"smooth":var n=this.get_object_meta_value(r,"scroll_to_top_duration","0");n=""==n?0:parseInt(n),$("html,body").animate({scrollTop:_},n)}},$.WS_Form.prototype.group_index_set=function(e){if(this.form.groups.length<=1)return!1;var t=this.framework.tabs.public;if(void 0!==t.activate_js){var a=t.activate_js;if(""!=a){var i={form:"#"+this.form_obj_id,index:e},r=this.mask_parse(a,i);$.globalEval("(function($) { $(function() {"+r+"}); })(jQuery);"),this.cookie_set("tab_index",e)}}this.form_progress_tabs(e),this.log("log_group_index",e)},$.WS_Form.prototype.get_group_index=function(e){if(this.form.groups.length<=1)return!1;var t=e.closest("[data-group-index]");if(0==t.length)return!1;var a=t.first().attr("data-group-index");return null!=a&&parseInt(a)},$.WS_Form.prototype.get_section_id=function(e){var t=e.closest('[id^="'+this.form_id_prefix+'section-"]').attr("data-id");return!!t&&parseInt(t)},$.WS_Form.prototype.get_field_id_from_obj=function(e){var t=e.closest("[data-type]").attr("data-id");return!!t&&parseInt(t)},$.WS_Form.prototype.form_tracking=function(){for(var e in $.WS_Form.tracking)if($.WS_Form.tracking.hasOwnProperty(e)){var t=$.WS_Form.tracking[e];if(this.get_object_meta_value(this.form,e,!1)&&void 0!==t.client_source){var a=t.client_source;if(void 0!==t.server_query_var){var i=t.server_query_var,r="";switch(a){case"query_var":if(void 0===t.client_query_var)break;var o=t.client_query_var;r=this.get_query_var(o);break;case"referrer":r=void 0!==document.referrer?document.referrer:"";break;case"pathname":r=void 0!==location.pathname?location.pathname:"";break;case"query_string":r=void 0!==location.search?location.search:"";break;case"os":if(void 0===window.navigator)break;r=void 0!==window.navigator.platform?window.navigator.platform:"";break;case"geo_location":if(!navigator.geolocation)break;var s=this;navigator.geolocation.getCurrentPosition(function(e){var t=e.coords.latitude+","+e.coords.longitude;s.form_geo_location_process(t),s.log("log_tracking_geo_location",t,"tracking")},function(e){s.form_geo_location_process(e.code),s.error("error_tracking_geo_location",s.form_geo_location_get_error(e),"tracking")});continue}this.form_add_hidden_input(i,this.html_encode(r))}}}},$.WS_Form.prototype.form_geo_location_process=function(e){this.form_add_hidden_input("wsf_geo_location",e)},$.WS_Form.prototype.form_geo_location_get_error=function(e){switch(e.code){case e.PERMISSION_DENIED:return this.language("debug_tracking_geo_location_permission_denied");case e.POSITION_UNAVAILABLE:return this.language("debug_tracking_geo_location_position_unavailable");case e.TIMEOUT:return this.language("debug_tracking_geo_location_timeout");default:return this.language("debug_tracking_geo_location_default")}},$.WS_Form.prototype.form_preview=function(){this.form_canvas_obj[0].hasAttribute("data-preview")&&this.form_add_hidden_input("wsf_preview","true")},$.WS_Form.prototype.form_spam_protection=function(){if(this.get_object_meta_value(this.form,"honeypot",!1)){var e=""!=this.form.published_checksum?this.form.published_checksum:"honeypot_unpublished_"+this.form_id,t=$.WS_Form.settings_plugin.framework,a=($.WS_Form.frameworks.types[t],this.framework.fields.public),i=void 0!==a.honeypot_attributes?" "+a.honeypot_attributes.join(" "):"";this.form_add_hidden_input("field_"+e,"",!1,'autocomplete="off"'+i),$('[name="field_'+e+'"]',this.form_canvas_obj).css({position:"absolute",left:"-9999em"}),this.log("log_honeypot","","spam-protect")}},$.WS_Form.prototype.form_analytics=function(){this.get_object_meta_value(this.form,"analytics_google",!1)&&this.form_analytics_google()},$.WS_Form.prototype.form_analytics_google=function(e){var t=this,a=$.WS_Form.analytics.google.functions;if(void 0===e)e=(new Date).getTime();if((new Date).getTime()-e>this.timeout_analytics_google)return this.error("error_timeout_analytics_google","","analytics"),!1;var i=!1;for(var r in a)if(a.hasOwnProperty(r)){var o=a[r];if(window[r]){i=!0,this.log(o.log_found,"","analytics");var s=this.get_object_meta_value(this.form,"analytics_google_event_field",!1),_=this.get_object_meta_value(this.form,"analytics_google_event_tab",!1);this.form_analytics_process("google",r,s,_),this.analytics_function.google=r;break}}i||setTimeout(function(){t.form_analytics_google(e)},this.timeout_interval)},$.WS_Form.prototype.form_analytics_process=function(e,t,a,i){a&&this.form_analytics_process_fields(e,t),i&&this.form.groups.length>0&&this.form_analytics_process_tabs(e,t)},$.WS_Form.prototype.form_analytics_process_tabs=function(e,t){var a=this,i=$.WS_Form.analytics[e].functions[t],r=$.WS_Form.analytics[e].label,o=i.label;$('[href^="#'+this.form_id_prefix+'tab-content-"]:not([data-init-analytics-tab])',this.form_canvas_obj).click(function(){$(this).attr("data-init-analytics-tab","");var i=$(this).closest("li").index();if(void 0===$(this).attr("data-analytics-event-fired")){var r=a.form.groups[i],o={action:a.js_string_encode(a.form.label),category:"Tab",label:a.js_string_encode(r.label)};a.form_analytics_event_fire(e,t,o),$(this).attr("data-analytics-event-fired","true")}}),a.log("log_analytics_event_tab",r+" ("+o+")","analytics")},$.WS_Form.prototype.form_analytics_process_fields=function(e,t){var a=this,i=$.WS_Form.analytics[e].functions[t],r=$.WS_Form.analytics[e].label,o=i.label;for(var s in this.field_data_cache)if(this.field_data_cache.hasOwnProperty(s)){var _=this.field_data_cache[s].type,n=$.WS_Form.field_type_cache[_];if(void 0!==n.events){var c=n.events.event,d=this.field_data_cache[s].id,l=void 0!==n.submit_array&&n.submit_array;$('[data-type][data-id="'+d+'"]',this.form_canvas_obj).each(function(){var i=$(this).attr("data-repeatable-index"),r=void 0!==i?"["+i+"]":"";if(l)var o=$('[name="'+ws_form_settings.field_prefix+d+r+'[]"]:not([data-init-analytics-field])',a.form_canvas_obj);else o=$('[name="'+ws_form_settings.field_prefix+d+r+'"]:not([data-init-analytics-field])',a.form_canvas_obj);o.length&&(o.attr("data-init-analytics-field",""),o.on(c,function(){if(void 0===$(this).attr("data-analytics-event-fired")){var i=$(this).closest("[data-type]").attr("data-id"),r=a.field_data_cache[i],o=$.WS_Form.field_type_cache[r.type].events.event_category,s={action:a.js_string_encode(a.form.label),category:o,label:a.js_string_encode(r.label)};a.form_analytics_event_fire(e,t,s),$(this).attr("data-analytics-event-fired","true")}}))})}}a.log("log_analytics_event_field",r+" ("+o+")","analytics")},$.WS_Form.prototype.form_analytics_event_fire=function(e,t,a){var i=$.WS_Form.analytics[e].functions[t],r=$.WS_Form.analytics[e].label,o=$.WS_Form.analytics[e].functions[t].label,s=atob(i.analytics_event_function),_=this.mask_parse(s,a);"js"==t||"function"==typeof window[t]?($.globalEval("(function($) {"+_+"})(jQuery);"),this.log("log_analytics_event_field_fired",r+" ("+o+") "+_,"analytics")):this.error("log_analytics_event_field_failed",r+" ("+o+") "+_,"analytics")},$.WS_Form.prototype.form_textarea=function(){var e=this;$('[data-textarea-type="tinymce"]',this.form_canvas_obj).each(function(){if("undefined"!=typeof wp&&void 0!==wp.editor&&void 0!==wp.editor.remove&&void 0!==wp.editor.initialize){var t=$(this).attr("id");switch($(this).attr("data-textarea-toolbar")){case"compact":var a={tinymce:{toolbar1:ws_form_settings.tinymce_toolbar1_compact,toolbar2:ws_form_settings.tinymce_toolbar2_compact,toolbar3:ws_form_settings.tinymce_toolbar3_compact,toolbar4:ws_form_settings.tinymce_toolbar4_compact,plugins:ws_form_settings.tinymce_plugins_compact}};break;default:a={tinymce:{toolbar1:ws_form_settings.tinymce_toolbar1_full,toolbar2:ws_form_settings.tinymce_toolbar2_full,toolbar3:ws_form_settings.tinymce_toolbar3_full,toolbar4:ws_form_settings.tinymce_toolbar4_full,plugins:ws_form_settings.tinymce_plugins_full}}}a.quicktags=!0,a.tinymce.wpautop=!0,a.tinymce.init_instance_callback=function(t){t.on("keyup change input",function(a){$("#"+t.id,e.form_canvas_obj).val(wp.editor.getContent(t.id)).trigger(a.type)});var a=$("#"+t.id,e.form_canvas_obj),i=a.closest("[data-id]"),r=i.attr("data-id"),o=i.attr("data-repeatable-index"),s=void 0!==o?"-repeat-"+o:"";$("#"+e.form_id_prefix+"invalid-feedback-"+r+s,e.form_canvas_obj).before(a.detach())},wp.editor.remove(t),wp.editor.initialize(t,a)}}),$('[data-textarea-type="html"]:visible',this.form_canvas_obj).each(function(){if("undefined"!=typeof wp&&void 0!==wp.codeEditor){var t=$(this).attr("id");wp.codeEditor.initialize(t),$(".CodeMirror",e.form_canvas_obj).each(function(){$(this)[0].CodeMirror.on("keyup",function(e,t){var a=e.getValue(),i=e.getTextArea();$(i,this.form_canvas_obj).val(a).trigger("keyup")})})}})},$.WS_Form.prototype.textarea_set_value=function(e,t){var a=void 0!==e.attr("data-textarea-type")&&e.attr("data-textarea-type");if(!1!==a){var i=e.attr("id");switch(a){case"tinymce":if("undefined"==typeof wp)break;if(void 0===wp.editor)break;tinyMCE.get(i).setContent(t);break;case"html":if("undefined"==typeof wp)break;if(void 0===wp.CodeMirror)break;e.next().get(0).CodeMirror.getDoc().setValue(t)}}},$.WS_Form.prototype.form_section_repeatable=function(e,t,a){var i=this;if(void 0===e)e=!0;if(void 0===t)t=!1;if(void 0===a)a=!1;var r=this.get_section_id_repeatable_array();for(var o in this.section_repeatable_indexes={},r)if(r.hasOwnProperty(o)){this.section_repeatable_indexes["section_"+o]=[];var s=this.section_data_cache[o],_=r[o],n=this.get_object_meta_value(s,"section_repeat_min",1);(n=""==n||isNaN(n)?1:parseInt(n))<1&&(n=1);var c=this.get_object_meta_value(s,"section_repeat_max",!1);!1!==(c=""!=c&&!isNaN(n)&&parseInt(c))&&c<n&&(n=c);var d=this.get_object_meta_value(s,"section_repeat_default",1);if((d=""==d||isNaN(d)?1:parseInt(d))<n&&(d=n),!1!==c&&d>c&&(d=c),t&&_<d){for(var l=$('[data-repeatable][data-id="'+o+'"]',this.form_canvas_obj).first(),h=0;h<d-_;h++)this.section_clone(l);r=this.get_section_id_repeatable_array();this.section_clone_init(o)}var f=this.get_object_meta_value(s,"render_label","on"),m=this.get_object_meta_value(s,"section_repeat_label","on");f&&!m&&$('[data-repeatable][data-id="'+o+'"]',this.form_canvas_obj).each(function(e){e?$("legend",$(this)).hide():$("legend",$(this)).show()}),e&&this.section_clone_init(o);_=$('[data-repeatable][data-id="'+o+'"]',this.form_canvas_obj).length;$('[data-repeatable][data-id="'+o+'"]',this.form_canvas_obj).each(function(){var e=$(this).attr("data-repeatable-index");i.section_repeatable_indexes["section_"+o].push(e)}),$('[data-action="wsf-section-add-button"][data-repeatable-section-id="'+o+'"]',this.form_canvas_obj).each(function(){i.section_add($(this),_,c)}),$('[data-action="wsf-section-add-icon"][data-repeatable-section-id="'+o+'"]',this.form_canvas_obj).each(function(){i.section_add($(this),_,c)}),$('[data-action="wsf-section-delete-button"][data-repeatable-section-id="'+o+'"]',this.form_canvas_obj).each(function(){i.section_delete($(this),_,n)}),$('[data-action="wsf-section-delete-icon"][data-repeatable-section-id="'+o+'"]',this.form_canvas_obj).each(function(){i.section_delete($(this),_,n)});var p=$('[data-repeatable][data-id="'+o+'"]',this.form_canvas_obj).first(),v=$('[data-type="section_up"]',p).map(function(){return $(this).attr("data-id")}).get();for(var u in v)if(v.hasOwnProperty(u)){var b=v[u];$('[data-id="'+b+'"] [data-action="wsf-section-move-up-button"]',this.form_canvas_obj).each(function(e){i.section_move_up($(this),_,e)})}var g=$('[data-type="section_down"]',p).map(function(){return $(this).attr("data-id")}).get();for(var j in g)if(g.hasOwnProperty(j)){b=g[j];$('[data-id="'+b+'"] [data-action="wsf-section-move-down-button"]',this.form_canvas_obj).each(function(e){i.section_move_down($(this),_,e)})}var w=$('[data-type="section_icons"]',p).map(function(){return $(this).attr("data-id")}).get();for(var y in w)if(w.hasOwnProperty(y)){b=w[y];$('[data-id="'+b+'"] [data-action="wsf-section-move-up-icon"]',this.form_canvas_obj).each(function(e){i.section_move_up($(this),_,e)}),$('[data-id="'+b+'"] [data-action="wsf-section-move-down-icon"]',this.form_canvas_obj).each(function(e){i.section_move_down($(this),_,e)}),$('[data-id="'+b+'"] [data-action="wsf-section-drag-icon"]',this.form_canvas_obj).each(function(e){i.section_drag($(this),_)})}a&&this.form_canvas_obj.trigger("wsf-section-repeatable-"+o)}this.form_add_hidden_input("wsf_form_section_repeatable_index",JSON.stringify(this.section_repeatable_indexes),!1,!1,!0),a&&this.form_canvas_obj.trigger("wsf-section-repeatable")},$.WS_Form.prototype.get_section_id_repeatable_array=function(){var e=[];return $("[data-repeatable]",this.form_canvas_obj).each(function(){var t=$(this).attr("data-id");void 0===e[t]?e[t]=1:e[t]++}),e},$.WS_Form.prototype.section_add=function(e,t,a){var i=this;!1!==a&&t>=a?this.section_action_off(e,"add"):(this.section_action_on(e,"add"),e.on("click",function(e){e.preventDefault();var t=$(this).attr("data-repeatable-section-id");if(void 0!==t){var a=$(this).closest("[data-repeatable]");if(a.length&&a.attr("data-id")==t)i.section_clone($(this).closest("[data-repeatable]"));else{var r=$('[data-repeatable][data-id="'+t+'"]',i.form_canvas_obj).last();i.section_clone(r)}i.section_clone_init(t),i.form_section_repeatable(),i.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+t)}else i.error("section_button_no_section")}))},$.WS_Form.prototype.section_delete=function(e,t,a){var i=this;t<=a?this.section_action_off(e,"delete"):(this.section_action_on(e,"delete"),e.on("click",function(e){e.preventDefault();var t=$(this).attr("data-repeatable-section-id");if(void 0!==t){var a=$(this).closest("[data-repeatable]");if(a.length&&a.attr("data-id")==t)$(this).closest("[data-repeatable]").remove();else $('[data-repeatable][data-id="'+t+'"]',i.form_canvas_obj).last().remove();i.form_calc_clean(),i.form_section_repeatable(),i.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+t)}else i.error("section_button_no_section")}))},$.WS_Form.prototype.section_move_up=function(e,t,a){var i=this;1==t||0==a?this.section_action_off(e,"move-up"):(this.section_action_on(e,"move-up"),e.on("click",function(e){e.preventDefault();var t=$(this).closest("[data-repeatable]");t.prev().insertAfter(t),i.form_section_repeatable()}))},$.WS_Form.prototype.section_move_down=function(e,t,a){var i=this;1==t||a==t-1?this.section_action_off(e,"move-down"):(this.section_action_on(e,"move-down"),e.on("click",function(e){e.preventDefault();var t=$(this).closest("[data-repeatable]");t.next().insertBefore(t),i.form_section_repeatable()}))},$.WS_Form.prototype.section_drag=function(e,t){var a=this;1==t?this.section_action_off(e,"drag"):(this.section_action_on(e,"drag"),e.on("mouseenter touchstart",function(){var e=$(this).closest("[data-repeatable]");if(!1===a.section_repeatable_dragged){var t=e.attr("data-id");e.parent(":not(.ui-sortable)").sortable({items:'> [data-repeatable][data-id="'+t+'"]',cancel:".wsf-section-repeatable-cancel",cursor:"move",handle:".wsf-section-drag",tolerance:"pointer",containment:"parent",start:function(e,t){t.placeholder;a.section_repeatable_dragged=!0},stop:function(e,t){a.section_repeatable_dragged=!1,a.form_section_repeatable()}})}}),e.on("mouseleave touchstart",function(){!1===a.section_repeatable_dragged&&$(this).closest("[data-repeatable]").parent(".ui-sortable").sortable("destroy")}))},$.WS_Form.prototype.section_action_off=function(e,t){if(e.addClass("wsf-section-"+t+"-disabled").filter(":button").attr("disabled",""),e.off(),void 0!==e.attr("data-color-off")){e.css({cursor:"not-allowed"});var a=e.attr("data-color-off");$("svg path",e).attr({fill:a}),$("span.wsf-section-icon-text",e).css({color:a})}},$.WS_Form.prototype.section_action_on=function(e,t){if(e.removeClass("wsf-section-"+t+"-disabled").filter(":button").removeAttr("disabled"),e.off(),void 0!==e.attr("data-color-on")){e.css({cursor:"pointer"});var a=e.attr("data-color-on");$("svg path",e).attr({fill:a}),$("span.wsf-section-icon-text",e).css({color:a})}},$.WS_Form.prototype.section_clone=function(e){var t=e.attr("data-id"),a=this.section_data_cache[t],i=(this.get_object_meta_value(a,"label_render",""),this.get_object_meta_value(a,"section_repeat_label",""),this.get_section_html(a)),r=$(i).insertAfter(e);for(var o in $("[data-init-conditional]",r).removeAttr("[data-init-conditional]"),$.WS_Form.field_type_cache)if($.WS_Form.field_type_cache.hasOwnProperty(o)){var s=$.WS_Form.field_type_cache[o];if(!1===(void 0===s.multiple||s.multiple)){var _=$('[data-type="'+o+'"]',r);_.length&&_.remove()}}return r},$.WS_Form.prototype.section_clone_init=function(e){this.form_required(),this.form_textarea(),this.form_select_all(),this.form_cascade(),this.form_inputmask(),this.form_checkbox_min_max(),this.form_select_min_max(),this.form_input_range(),this.form_date(),this.form_color(),this.form_signature(),this.form_rating(),this.form_section_icons(),this.form_file(),this.form_progress(),this.form_character_word_count(),this.form_password_strength_meter(),this.form_ecommerce(),this.form_calc(!1,e),this.form_credit_card(),this.form_navigation(),this.form_analytics(),this.form_validate_real_time(),this.form_conditional(!1)},$.WS_Form.prototype.form_progress=function(){var e=this,t=this.get_field_value_fallback("progress",!1,"class_complete",[]);this.progress_class_complete=t.join(" ");var a=this.get_field_value_fallback("progress",!1,"class_incomplete",[]);this.progress_class_incomplete=a.join(" "),$("[data-required]",this.form_canvas_obj).each(function(){var t=$(this).closest("[data-id]").attr("data-id"),a=e.field_data_cache[t].type,i=$.WS_Form.field_type_cache[a].events.event;$(this).on(i,function(){e.form_progress_process()})}),this.form_progress_process(),this.api_call_progress_reset()},$.WS_Form.prototype.form_progress_process=function(){var e=this,t=[],a=0,i=0;$("[data-required]:not([data-required-bypass])",this.form_canvas_obj).each(function(){var r=$(this).closest("[data-id]").attr("data-id"),o=e.field_data_cache[r].type,s=$(this).closest("[data-type]").attr("data-repeatable-index"),_=void 0!==s?"["+s+"]":"",n=ws_form_settings.field_prefix+r+_,c=!1;switch(o){case"radio":case"price_radio":if(void 0!==t[n])return;c=$(this)[0].checkValidity();break;case"signature":c=e.signature_get_response_by_name(n);break;case"email":c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test($(this).val());break;default:c=$(this)[0].checkValidity()}c&&i++,t[n]=!0,a++});var r=a>0?Math.round(i/a*100):0;$('[data-progress-bar][data-source="form_progress"]',this.form_canvas_obj).each(function(){e.form_progress_set_value($(this),r)})},$.WS_Form.prototype.form_progress_set_value=function(e,t){var a=$("[data-progress-bar-value]",e);if(a.length||(a=e),e.is("progress")){var i=e.attr("min")?parseFloat(e.attr("min")):0,r=e.attr("max")?parseFloat(e.attr("max")):100;if(r-i<=0)return;var o=i+t/100*(r-i);o<i&&(o=i),o>r&&(o=r);var s=a.val()!=o;a.val(o),s&&a.trigger("change")}else{s=a.attr("data-value")!=t;a.attr("data-value",t).css("width",t+"%"),s&&a.trigger("change"),void 0!==e.attr("aria-valuenow")&&e.attr("aria-valuenow",t),void 0!==a.attr("aria-valuenow")&&a.attr("aria-valuenow",t)}100==t?(e.addClass(this.progress_class_complete),e.removeClass(this.progress_class_incomplete)):(e.removeClass(this.progress_class_complete),e.addClass(this.progress_class_incomplete));var _=e.closest("[data-id]").attr("data-id"),n=e.closest("[data-id]").attr("data-repeatable-index"),c=void 0!==n?"-repeat-"+n:"",d=this.field_data_cache[_],l=this.get_object_meta_value(d,"help","",!1,!1);if(-1!==l.indexOf("#progress")){var h={progress_remaining_percent:100-t+"%",progress_remaining:100-t,progress_percent:t+"%",progress:t},f=this.mask_parse(l,h);f=this.parse_variables_process(f).output;var m=this.form_id_prefix+"help-"+_+c;$("#"+m,this.form_canvas_obj).html(f)}},$.WS_Form.prototype.form_progress_tabs=function(e){var t=this,a=$('[data-source="tab_progress"]',this.form_canvas_obj);if(a.length){var i=this.form.groups.length;a.each(function(){var a=(e+1)/i*100;t.form_progress_set_value($(this),Math.round(a))})}},$.WS_Form.prototype.form_signature=function(){var e=this,t=$('[data-type="signature"]:not([data-init-signature])',this.form_canvas_obj);if(!t.length)return!1;t.each(function(){$(this).attr("data-init-signature","");var t=$("canvas",$(this)),a=t[0],i=t.attr("data-name"),r=$(this).attr("data-id"),o=e.field_data_cache[r],s=e.get_object_meta_value(o,"required",!1);if(e.get_object_meta_value(o,"disabled",!1)){var _=e.get_field_value_fallback("signature",!1,"class_disabled",!1);!1!==_&&t.addClass(_.join(" ")),t.css({"pointer-events":"none"})}var n=t.attr("data-dot-size"),c=void 0!==t.attr("data-crop"),d=t.attr("data-pen-color"),l=void 0!==t.attr("data-mime")?t.attr("data-mime"):"image/png",h={maxWidth:n,penColor:d},f={signature:!1,canvas:t,canvas_element:a,name:i,mime:l,config:h,required:s,data_required:s,crop:c};if("image/jpeg"==l){var m=void 0!==t.attr("data-background-color")?t.attr("data-background-color"):"#ffffff";h.backgroundColor=m,f.background_color=m}e.signatures.push(f),e.signature_process(e.signatures[e.signatures.length-1])})},$.WS_Form.prototype.signature_process=function(e,t){var a=this;if("undefined"!=typeof SignaturePad){var i=this.framework.groups.public,r=(i.class_active,i.class_active),o=$(e.canvas_element,this.form_canvas_obj).closest('[id^="'+this.form_id_prefix+'tab-content-"]'),s=o.is(":visible");s||(r?o.addClass(r):o.show());var _=new SignaturePad(e.canvas_element,e.config);e.signature=_,this.signatures_by_name[e.name]=e,e.canvas.parent().find('[data-action="wsf-signature-clear"]').click(function(t){t.preventDefault(),e.signature.clear(),e.canvas.trigger("mouseup")}),$(document).keydown(function(t){e.canvas.is(":focus")&&27==t.keyCode&&e.signature.clear()}),$(window).resize(function(){a.signature_redraw(e.signature,e.canvas_element)}),a.signature_redraw(e.signature,e.canvas_element,!0),s||(r?o.removeClass(r):o.hide()),this.form_validate_real_time_process(!1)}},$.WS_Form.prototype.signature_redraw=function(e,t,a){if(void 0===a)a=!1;if(!a&&e.isEmpty()&&(a=!0),!a)var i=e.toDataURL();var r=Math.max(window.devicePixelRatio||1,1);t.width=t.offsetWidth*r,t.height=t.offsetHeight*r,t.getContext("2d").scale(r,r),a?e.clear():e.fromDataURL(i)},$.WS_Form.prototype.signatures_redraw=function(e,t,a){if(void 0===t)t=!1;if(void 0===a)a=!1;for(var i in this.signatures)if(this.signatures.hasOwnProperty(i)){var r=this.signatures[i];if(!1!==r.signature){var o=r.canvas_element,s=this.get_group_index($(o,this.form_canvas_obj)),_=this.get_section_id($(o,this.form_canvas_obj)),n=this.get_field_id_from_obj($(o,this.form_canvas_obj));(!1!==e&&s==e||!1!==t&&t==_||a==n)&&this.signature_redraw(r.signature,o)}}},$.WS_Form.prototype.signatures_clear=function(){for(var e in this.signatures){if(this.signatures.hasOwnProperty(e))this.signatures[e].signature.clear()}},$.WS_Form.prototype.signature_clear_by_name=function(e){var t=void 0!==this.signatures_by_name[e]&&this.signatures_by_name[e];!1!==t&&t.signature.clear()},$.WS_Form.prototype.signature_get_response_by_name=function(e){var t=void 0!==this.signatures_by_name[e]&&this.signatures_by_name[e];return!1!==t&&!t.signature.isEmpty()},$.WS_Form.prototype.form_recaptcha=function(){var e=this,t=$("[data-recaptcha-type]",this.form_canvas_obj);if(!t.length)return!1;if(!$("#wsf-recaptcha-script-head").length){"var wsf_recaptcha_loaded = false;","<\/script>","<script>","function wsf_recaptcha_onload() {","wsf_recaptcha_loaded = true;","}","<\/script>",$("head").append('<script id="wsf-recaptcha-script-head">var wsf_recaptcha_loaded = false;<\/script><script>function wsf_recaptcha_onload() {wsf_recaptcha_loaded = true;}<\/script>')}var a=$('[data-recaptcha-type="v3_default"]',this.form_canvas_obj).length?3:2;if(!window.___grecaptcha_cfg&&!$("#wsf-recaptcha-script-body").length){switch(a){case 2:var i='<script id="wsf-recaptcha-script-body" src="https://www.google.com/recaptcha/api.js?onload=wsf_recaptcha_onload&render=explicit" async defer><\/script>';break;case 3:i='<script id="wsf-recaptcha-script-body" src="https://www.google.com/recaptcha/api.js?onload=wsf_recaptcha_onload&render='+$('[data-recaptcha-type="v3_default"]',this.form_canvas_obj).eq(0).attr("data-site-key")+'"><\/script>'}$("body").append(i)}this.recaptchas=[],this.recaptchas_v2_default=[],this.recaptchas_v2_invisible=[],this.recaptchas_v3_default=[],t.each(function(){var t=$(this).attr("data-name"),a=$(this).attr("id");if(void 0===a||""==a)return!1;var i=$(this).attr("data-site-key");if(void 0===i||""==i)return!1;var r=$(this).attr("data-recaptcha-type");void 0!==r&&-1!=["v2_default","v2_invisible","v3_default"].indexOf(r)||(r="default");var o=$(this).attr("data-type");void 0!==o&&-1!=["image","audio"].indexOf(o)||(o="image");var s=$(this).attr("data-language");void 0===s&&(s="");var _=$(this).attr("data-recaptcha-action");switch(void 0!==_&&""!=_||(_="ws_form_loaded_#form_id"),r){case"v2_default":var n=$(this).attr("data-size");void 0!==n&&-1!=["normal","compact","invisible"].indexOf(n)||(n="normal");var c=$(this).attr("data-theme");void 0!==c&&-1!=["light","dark"].indexOf(c)||(c="light");var d=e.get_field_value_fallback("recaptcha",!1,"class_invalid_label",[]),l=e.get_field_value_fallback("recaptcha",!1,"class_invalid_field",[]),h=e.get_field_value_fallback("recaptcha",!1,"class_invalid_invalid_feedback",[]),f=e.get_field_value_fallback("recaptcha",!1,"class_valid_label",[]),m=e.get_field_value_fallback("recaptcha",!1,"class_valid_field",[]),p=e.get_field_value_fallback("recaptcha",!1,"class_valid_invalid_feedback",[]),v=$(this),u=v.closest("[data-id]"),b=$("label",u),g=$("#"+this.form_id_prefix+"invalid-feedback-"+a,u,e.form_canvas_obj),j={sitekey:i,type:o,theme:c,size:n,callback:function(t){for(var a in b.addClass(f.join(" ")),b.removeClass(d.join(" ")),v.addClass(m.join(" ")),v.removeClass(l.join(" ")),g.addClass(p.join(" ")),g.removeClass(h.join(" ")),e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(a)&&e.recaptchas_conditions[a]();e.form_validate_real_time_process(!1)},"expired-callback":function(){for(var t in b.addClass(d.join(" ")),b.removeClass(f.join(" ")),v.addClass(l.join(" ")),v.removeClass(m.join(" ")),g.addClass(h.join(" ")),g.removeClass(p.join(" ")),e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(t)&&e.recaptchas_conditions[t]();e.form_validate_real_time_process(!1)},"error-callback":function(){for(var t in b.addClass(d.join(" ")),b.removeClass(f.join(" ")),v.addClass(l.join(" ")),v.removeClass(m.join(" ")),g.addClass(h.join(" ")),g.removeClass(p.join(" ")),e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(t)&&e.recaptchas_conditions[t]();e.form_validate_real_time_process(!1)}};""!=s&&(j.hl=s);var w={id:!1,recaptcha_site_key:i,name:t,recaptcha_id:a,config:j,recaptcha_recaptcha_type:r,type:"v2_default"};e.recaptchas_v2_default.push(w),e.recaptcha_process(w);break;case"v2_invisible":var y=$(this).attr("data-badge");void 0!==y&&-1!=["bottomright","bottomleft","inline"].indexOf(y)||(y="bottomright");j={sitekey:i,badge:y,size:"invisible",callback:function(){for(var t in e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(t)&&e.recaptchas_conditions[t]();e.form_validate_real_time_process(!1),e.form_post("submit")},"expired-callback":function(){for(var t in e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(t)&&e.recaptchas_conditions[t]();e.form_validate_real_time_process(!1)},"error-callback":function(){for(var t in e.error("error_recaptcha_v2_hidden"),e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(t)&&e.recaptchas_conditions[t]();e.form_validate_real_time_process(!1)}};""!=s&&(j.hl=s);w={id:!1,recaptcha_site_key:i,name:t,recaptcha_id:a,config:j,recaptcha_recaptcha_type:r,type:"v2_invisible"};e.recaptchas_v2_invisible.push(w),e.recaptcha_process(w);break;case"v3_default":w={id:!1,recaptcha_site_key:i,name:t,recaptcha_id:a,config:j={action:_=e.parse_variables_process(_).output},recaptcha_recaptcha_type:r,type:"v3_default"};e.recaptchas_v3_default.push(w),e.recaptcha_process(w)}})},$.WS_Form.prototype.recaptcha_process=function(e,t){var a=this;if(void 0===t)t=(new Date).getTime();if((new Date).getTime()-t>this.timeout_recaptcha)return this.error("error_timeout_recaptcha"),!1;if(wsf_recaptcha_loaded)switch(e.type){case"v2_default":case"v2_invisible":i=grecaptcha.render(e.recaptcha_id,e.config);e.id=i,this.form_validate_real_time_process(!1);break;case"v3_default":a=this;var i=grecaptcha.execute(e.recaptcha_site_key,e.config).then(function(t){if(!$('[data-recaptcha-response="'+e.recaptcha_id+'"]',this.form_canvas_obj).length){var r='<input type="hidden" data-recaptcha-response="'+i+'" name="g-recaptcha-response" value="" />';$("#"+i).html(r)}$('[data-recaptcha-response="'+i+'"]',a.form_canvas_obj).val(a.html_encode(t)),e.id=i,a.form_validate_real_time_process(!1),a.log("log_recaptcha_v3_action_fired",e.config.action)})}else{a=this;setTimeout(function(){a.recaptcha_process(e,t)},this.timeout_interval)}},$.WS_Form.prototype.recaptcha_v2_invisible_execute=function(){for(var e in this.recaptchas_v2_invisible)if(this.recaptchas_v2_invisible.hasOwnProperty(e)){var t=this.recaptchas_v2_invisible[e].id;grecaptcha.execute(t),this.form_validate_real_time_process(!1)}},$.WS_Form.prototype.recaptcha_reset=function(){for(var e in this.recaptchas)if(this.recaptchas.hasOwnProperty(e)){var t=this.recaptchas[e].id;grecaptcha.reset(t)}},$.WS_Form.prototype.recaptcha_get_response_by_name=function(e){for(var t in this.recaptchas)if(this.recaptchas.hasOwnProperty(t)){var a=this.recaptchas[t];if(a.name==e)return a.getResponse(a.id)}return""},$.WS_Form.prototype.form_legal=function(){var e=this;$("[data-wsf-legal]",this.form_canvas_obj).each(function(){var t=$(this).attr("data-wsf-legal-source");if(t)switch(t){case"termageddon":$(this).html("");var a=$(this).attr("data-wsf-termageddon-key");if(void 0!==a){var i=$(this).attr("data-wsf-termageddon-extra")?"?"+$(this).attr("data-wsf-termageddon-extra"):"",r=$(this),o=new XMLHttpRequest;o.onloadend=function(){switch(o.status){case 200:r.html(o.responseText);break;case 404:e.error("error_termageddon_404");break;default:e.error("error_termageddon")}},o.open("GET","https://app.termageddon.com/api/policy/"+a+i),o.send()}}})},$.WS_Form.prototype.form_section_icons=function(){var e=this,t=["move-up","move-down","drag"],a={circle:{add:'<path d="M13.7 2.3C12.1.8 10.1 0 8 0S3.9.8 2.3 2.3 0 5.9 0 8s.8 4.1 2.3 5.7S5.9 16 8 16s4.1-.8 5.7-2.3S16 10.1 16 8s-.8-4.1-2.3-5.7zM8 14.8c-3.7 0-6.8-3-6.8-6.8s3-6.8 6.8-6.8 6.8 3 6.8 6.8-3.1 6.8-6.8 6.8zm.6-7.4h2.8v1.2H8.6v2.8H7.4V8.6H4.6V7.4h2.8V4.6h1.2v2.8z"/>',delete:'<path d="M8 16c-2.1 0-4.1-.8-5.7-2.3S0 10.1 0 8s.8-4.1 2.3-5.7S5.9 0 8 0s4.1.8 5.7 2.3S16 5.9 16 8s-.8 4.1-2.3 5.7S10.1 16 8 16zM8 1.2c-3.7 0-6.8 3-6.8 6.8s3 6.8 6.8 6.8 6.8-3 6.8-6.8S11.7 1.2 8 1.2zm3.4 6.2H4.6v1.2h6.9V7.4z"/>',"move-up":'<path d="M8 16c-2.1 0-4.1-.8-5.7-2.3S0 10.1 0 8s.8-4.1 2.3-5.7S5.9 0 8 0s4.1.8 5.7 2.3S16 5.9 16 8s-.8 4.1-2.3 5.7S10.1 16 8 16zM8 1.2c-3.7 0-6.8 3-6.8 6.8s3 6.8 6.8 6.8 6.8-3 6.8-6.8S11.7 1.2 8 1.2zm4.3 7.9L8 4.7 3.7 9.1l.9.9L8 6.5l3.4 3.4.9-.8z"/>',"move-down":'<path d="M8 0c2.1 0 4.1.8 5.7 2.3S16 5.9 16 8s-.8 4.1-2.3 5.7S10.1 16 8 16s-4.1-.8-5.7-2.3S0 10.1 0 8s.8-4.1 2.3-5.7S5.9 0 8 0zm0 14.8c3.7 0 6.8-3 6.8-6.8s-3-6.8-6.8-6.8S1.2 4.3 1.2 8s3.1 6.8 6.8 6.8zM3.7 6.9L8 11.3 12.3 7l-.9-.9L8 9.5 4.6 6.1l-.9.8z"/>',drag:'<path d="M8 0c2.1 0 4.1.8 5.7 2.3S16 5.9 16 8s-.8 4.1-2.3 5.7S10.1 16 8 16s-4.1-.8-5.7-2.3S0 10.1 0 8s.8-4.1 2.3-5.7S5.9 0 8 0zm0 14.8c3.7 0 6.8-3 6.8-6.8s-3-6.8-6.8-6.8S1.2 4.3 1.2 8s3.1 6.8 6.8 6.8zm-4-4.7h8v1.3H4v-1.3zm0-2.7h8v1.3H4V7.4zm0-2.8h8v1.3H4V4.6z"/>'},"circle-solid":{add:'<path d="M13.7 2.3C12.1.8 10.1 0 8 0S3.9.8 2.3 2.3C.7 3.8 0 5.9 0 8s.8 4.1 2.3 5.7C3.8 15.3 5.9 16 8 16s4.1-.8 5.7-2.3C15.3 12.2 16 10.1 16 8s-.8-4.1-2.3-5.7zM8.6 7.4h2.8v1.2H8.6v2.8H7.4V8.6H4.6V7.4h2.8V4.6h1.2v2.8z"/>',delete:'<path d="M8 16c-2.1 0-4.1-.8-5.7-2.3C.7 12.2 0 10.1 0 8s.8-4.1 2.3-5.7C3.8.7 5.9 0 8 0s4.1.8 5.7 2.3C15.3 3.8 16 5.9 16 8s-.8 4.1-2.3 5.7C12.2 15.3 10.1 16 8 16zm3.4-8.6H4.6v1.2h6.9V7.4h-.1z"/>',"move-up":'<path d="M8 16c-2.1 0-4.1-.8-5.7-2.3C.7 12.2 0 10.1 0 8s.8-4.1 2.3-5.7C3.8.7 5.9 0 8 0s4.1.8 5.7 2.3C15.3 3.8 16 5.9 16 8s-.8 4.1-2.3 5.7C12.2 15.3 10.1 16 8 16zm4.3-6.9L8 4.7 3.7 9.1l.9.9L8 6.5l3.4 3.4.9-.8z"/>',"move-down":'<path d="M8 0c2.1 0 4.1.8 5.7 2.3C15.3 3.8 16 5.9 16 8s-.8 4.1-2.3 5.7C12.2 15.3 10.1 16 8 16s-4.1-.8-5.7-2.3C.7 12.2 0 10.1 0 8s.8-4.1 2.3-5.7C3.8.7 5.9 0 8 0zM3.7 6.9L8 11.3 12.3 7l-.9-.9L8 9.5 4.6 6.1l-.9.8z"/>',drag:'<path d="M8 0c2.1 0 4.1.8 5.7 2.3C15.3 3.8 16 5.9 16 8s-.8 4.1-2.3 5.7C12.2 15.3 10.1 16 8 16s-4.1-.8-5.7-2.3C.7 12.2 0 10.1 0 8s.8-4.1 2.3-5.7C3.8.7 5.9 0 8 0zm4 10.1H4v1.3h8v-1.3zm0-2.7H4v1.3h8V7.4zm0-2.8H4v1.3h8V4.6z"/>'},square:{add:'<path d="M8 16H0V0h16v16H8zM8 1.2H1.2v13.6h13.6V1.2H8zm.6 6.2h2.8v1.2H8.6v2.8H7.4V8.6H4.6V7.4h2.8V4.6h1.2v2.8z"/>',delete:'<path d="M8 16H0V0h16v16H8zM8 1.2H1.2v13.6h13.6V1.2H8zm3.4 6.2H4.6v1.2h6.9V7.4h-.1z"/>',"move-up":'<path d="M8 16H0V0h16v16H8zM8 1.2H1.2v13.6h13.6V1.2H8zm4.3 7.9L8 4.7 3.7 9.1l.9.9L8 6.5l3.4 3.4.9-.8z"/>',"move-down":'<path d="M8 16H0V0h16v16H8zM8 1.2H1.2v13.6h13.6V1.2H8zM3.7 6.9L8 11.3 12.3 7l-.9-.9L8 9.5 4.6 6.1l-.9.8z"/>',drag:'<path d="M8 16H0V0h16v16H8zM8 1.2H1.2v13.6h13.6V1.2H8zm-4 8.9h8v1.3H4v-1.3zm0-2.7h8v1.3H4V7.4zm0-2.8h8v1.3H4V4.6z"/>'},"square-solid":{add:'<path d="M16 0v16H0V0h16zM8.6 4.6H7.4v2.8H4.6v1.2h2.8v2.8h1.2V8.6h2.8V7.4H8.6V4.6z"/>',delete:'<path d="M8 16H0V0h16v16H8zm3.4-8.6H4.6v1.2h6.9V7.4h-.1z"/>',"move-up":'<path d="M8 16H0V0h16v16H8zm4.3-6.9L8 4.7 3.7 9.1l.9.9L8 6.5l3.4 3.4.9-.8z"/>',"move-down":'<path d="M8 16H0V0h16v16H8zM3.7 6.9L8 11.3 12.3 7l-.9-.9L8 9.5 4.6 6.1l-.9.8z"/>',drag:'<path d="M16 0v16H0V0h16zm-4 10.1H4v1.3h8v-1.3zm0-2.7H4v1.3h8V7.4zm0-2.8H4v1.3h8V4.6z"/>'}};$("[data-section-icons]:not([data-init-section-icons])",this.form_canvas_obj).each(function(){$(this).attr("data-init-section-icons","");var i=[],r=$(this).closest("[data-id]").attr("data-id"),o=e.field_data_cache[r],s=$(this).attr("data-repeatable-section-id");void 0===s&&(e.error("section_icon_no_section"),s=0),$(this).attr("data-repeatable-section-id",!1);var _=$(this).closest("[data-repeatable]"),n=_.length&&_.attr("data-id")==s,c=e.get_object_meta_value(o,"section_icons_style",[]);$(this).addClass("wsf-section-icons-"+c);var d=parseInt(e.get_object_meta_value(o,"section_icons_size","24"));isNaN(d)&&(d=24),d<1&&(d=1);var l=e.get_object_meta_value(o,"section_icons_color_on","#000"),h=e.get_object_meta_value(o,"section_icons_color_off","#888"),f=e.get_object_meta_value(o,"horizontal_align","right"),m=ws_form_settings.skin_grid_gutter/4,p=e.get_object_meta_value(o,"section_icons",[]);for(var v in p)if(p.hasOwnProperty(v)){var u=p[v],b=void 0!==u.section_icons_type&&u.section_icons_type;if(!1!==b){var g=void 0!==u.section_icons_label?u.section_icons_label:e.language("section_icon_"+b);if(-1===t.indexOf(b)||n){var j='<span class="wsf-section-icon-text">'+e.language("section_icon_"+b)+"</span>",w="drag"==b?"move":"pointer";switch(c){case"text":var y=j;break;case"custom":""==(y=e.get_object_meta_value(o,"section_icons_html_"+b,""))&&(y=j);break;default:var k=void 0!==a[c]&&void 0!==a[c][b]&&a[c][b];y=!1!==k?'<svg class="wsf-section-icon" height="'+d+'" width="'+d+'" viewBox="0 0 16 16" style="display: block; height: auto; max-width: 100%;">'+k+"</svg>":j}i.push('<li data-action="wsf-section-'+b+'-icon" class="wsf-section-'+b+'" style="cursor: '+w+"; margin: "+(v>0?ws_form_settings.rtl?"0 "+m+"px 0 0":"0 0 0 "+m+"px":"0")+'; padding: 0;" title="'+e.html_encode(g)+'" aria-label="'+e.html_encode(g)+'" role="button" data-color-on="'+l+'" data-color-off="'+h+'" data-repeatable-section-id="'+s+'">'+y+"</li>")}else e.error("section_icon_not_in_own_section",b)}}$(this).html('<ul class="wsf-section-icons" style="display: flex; justify-content: '+f+'; list-style-type: none; margin: 0; padding: 0; user-select: none;">'+i.join("")+"</ul>")})},$.WS_Form.prototype.form_rating=function(){var e=this,t=ws_form_settings.skin_grid_gutter/4;$("[data-rating]:not([data-init-rating])",this.form_canvas_obj).each(function(){$(this).attr("data-init-rating","");$(this).attr("name");var a=$(this).closest("[data-id]"),i=a.attr("data-id"),r=e.field_data_cache[i],o=parseInt(e.get_object_meta_value(r,"rating_max","5"));isNaN(o)&&(o=5),o<1&&(o=1);var s=$(this).val(),_=e.get_object_meta_value(r,"rating_icon","star"),n=parseInt(e.get_object_meta_value(r,"rating_size","24"));isNaN(n)&&(n=24),n<1&&(n=1);var c=$(this).attr("data-rating-color-off"),d=$(this).attr("data-rating-color-on");if("custom"!=_){var l='<svg class="wsf-rating-icon" height="'+n+'" width="'+n+'" viewBox="0 0 16 16" style="display: block; height: auto; max-width: 100%;">';switch(_){case"heart":l+='<path d="M7.4,13.6c-0.3-0.4-1.2-1.1-1.9-1.7c-2.1-1.6-2.4-1.8-3.2-2.6C0.7,7.9,0,6.4,0,4.5 c0-1,0.1-1.3,0.3-1.9c0.5-1,1.1-1.7,2-2.1C2.9,0.1,3.2,0,4.2,0c1.1,0,1.3,0.1,1.9,0.5c0.8,0.4,1.5,1.3,1.7,1.9L8,2.8l0.2-0.5 c1.4-3,5.8-3,7.4,0.1c0.5,1,0.5,3.1,0.1,4.2c-0.6,1.5-1.6,2.7-4.1,4.5C10,12.2,8.2,14,8,14.3C7.9,14.6,8,14.3,7.4,13.6z" fill="'+c+'" />';break;case"check":l+='<path d="M7.3 14.2l-7.1-5.2 1.7-2.4 4.8 3.5 6.6-8.5 2.3 1.8z" fill="'+c+'" />';break;case"circle":l+='<path d="M0,8a8,8 0 1,0 16,0a8,8 0 1,0 -16,0" fill="'+c+'" />';break;case"flag":l+='<path d="M11.8 1.2s-2.7 1.3-5.3.3C3.6.5 2.3.9 1 2.5c-.2-.1-.5-.1-.7 0-.3.2-.4.6-.2.9l7.1 11.5c.1.2.4.3.6.3.1 0 .2 0 .4-.1.3-.2.4-.6.2-1l-3.2-5c1.2-1.5 2.6-1.9 5.4-.9 2.7.9 5.4-.4 5.4-.4l-4.2-6.6z" fill="'+c+'" />';break;case"smiley":l+='<path d="M8 16c4.4 0 8-3.6 8-8s-3.6-8-8-8-8 3.6-8 8 3.6 8 8 8zM8 1.5c3.6 0 6.5 2.9 6.5 6.5s-2.9 6.5-6.5 6.5S1.5 11.6 1.5 8 4.4 1.5 8 1.5zM4.6 5.6c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1-1-.5-1-1zm4.5 0c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1-1-.5-1-1zM11 9.3l1.3.8c-.9 1.5-2.5 2.4-4.3 2.4s-3.4-1-4.3-2.4L5 9.3c.6 1 1.7 1.7 3 1.7s2.4-.6 3-1.7z" fill="'+c+'" />';break;case"square":l+='<path d="M0 0h16v16H0z" fill="'+c+'" />';break;case"thumb":l+='<path d="M13.9 9.9c0 .7-.7 1.2-1.4 1.2.5.1 1.2.7 1.2 1.4s-.7 1.1-1.3 1.1h-.6c.5.1 1.1.8 1.1 1.4 0 .7-.7 1.1-1.4 1.1h-6c-2 0-3.5-1.6-3.5-3.6V8.7c0-1.4.8-2.9 2-3.3.9-.6 2.8-1.7 3.2-3.8V.1s2.6-.3 2.6 2.2c0 2.9-1.8 3.4-.4 3.5h2.2c.8 0 1.4.8 1.4 1.5s-.6 1.1-1.2 1.2h.6c.9 0 1.5.7 1.5 1.4z" fill="'+c+'" />';break;default:l+='<path d="M12.9 15.8c-1.6-1.2-3.2-2.5-4.9-3.7-1.6 1.3-3.3 2.5-4.9 3.7 0 0-.1 0-.1-.1.6-2 1.2-4 1.9-6C3.3 8.4 1.7 7.2 0 5.9h6C6.7 3.9 7.3 2 8 0h.1c.7 1.9 1.3 3.9 2 5.9H16V6c-1.6 1.3-3.2 2.5-4.9 3.8.6 1.9 1.3 3.9 1.8 6 .1-.1 0 0 0 0z" fill="'+c+'" />'}l+="</svg>"}else l=e.get_object_meta_value(r,"rating_icon_html","<span>*</span>");for(var h='<ul class="wsf-rating" style="display: flex; list-style: none; margin: 0; padding: 0; user-select: none; justify-content: '+e.get_object_meta_value(r,"horizontal_align","left")+'">',f=1;f<=o;f++)h+='<li class="wsf-rating-'+f+(f<=s?" wsf-rating-selected":"")+'" style="cursor: pointer; display:inline-block; padding: '+(f>1?ws_form_settings.rtl?"0 "+t+"px 0 0":"0 0 0 "+t+"px":"0")+'; margin: 0;" data-value="'+f+'" title="'+f+'">'+l+"</li>";h+="</ul>",$(this).after(h),$("ul.wsf-rating > li",a).each(function(e){$("svg.wsf-rating-icon path",$(this)).attr("fill",$(this).hasClass("wsf-rating-selected")?d:c)}),$(this).on("change input",function(){e.form_rating_process($(this),$(this).val())}),$("ul.wsf-rating > li",a).on("mouseover",function(){var e=$("[data-rating]",$(this).closest("[data-id]")),t=e.attr("data-rating-color-off"),a=e.attr("data-rating-color-on");e.attr("data-value-old",e.val());var i=parseInt($(this).attr("data-value"),10);e.val(i).trigger("input"),$(this).parent().children("li").each(function(e){e<i?($(this).addClass("wsf-rating-hover"),$("svg.wsf-rating-icon path",$(this)).attr("fill",a)):($(this).removeClass("wsf-rating-hover"),$("svg.wsf-rating-icon path",$(this)).attr("fill",t))})}).on("mouseout",function(){var e=$("[data-rating]",$(this).closest("[data-id]"));if(void 0!==e.attr("data-value-old")){var t=e.attr("data-value-old");e.val(t).trigger("input")}$(this).parent().children("li").each(function(e){$(this).removeClass("wsf-rating-hover"),$("svg.wsf-rating-icon path",$(this)).attr("fill",$(this).hasClass("wsf-rating-selected")?d:c)})}),$("ul.wsf-rating > li",a).on("click",function(){var e=$("[data-rating]",$(this).closest("[data-id]")),t=parseInt($(this).attr("data-value"),10);e.val(t).attr("data-value-old",t).trigger("input")})})},$.WS_Form.prototype.form_rating_process=function(e,t){var a=e.attr("data-rating-color-off"),i=e.attr("data-rating-color-on");$("ul li",e.parent()).each(function(e){e<t?($(this).addClass("wsf-rating-selected"),$("svg.wsf-rating-icon path",$(this)).attr("fill",i)):($(this).removeClass("wsf-rating-selected"),$("svg.wsf-rating-icon path",$(this)).attr("fill",a))})},$.WS_Form.prototype.form_required=function(){var e=this;if(!this.get_object_meta_value(this.form,"label_required",!1))return!1;if(""==(t=this.get_object_meta_value(this.form,"label_mask_required","",!0,!0))){var t,a=$.WS_Form.settings_plugin.framework,i=($.WS_Form.frameworks.types[a],this.framework.fields.public);if(void 0===i.mask_required_label)return!1;if(""==(t=i.mask_required_label))return!1}$("label:not([data-init-required])",this.form_canvas_obj).each(function(){$(this).attr("data-init-required","");var a=$(this).attr("for");if(void 0!==a){var i=$('[id="'+a+'"]',e.form_canvas_obj);if(i.length){var r=void 0!==i.attr("data-required"),o=$(this).attr("data-label-required-id");if(void 0!==o&&!1!==o)var s=$("#"+o,e.form_canvas_obj);else s=$(this);var _=$(".wsf-required-wrapper",s);if(!_.length&&r){var n=s.children("input").first();n.length?n.before('<span class="wsf-required-wrapper"></span>'):s.append('<span class="wsf-required-wrapper"></span>'),_=$(".wsf-required-wrapper",s)}r?_.html(t):_.html("")}}}),this.form_required_bypass(!1)},$.WS_Form.prototype.form_required_bypass=function(e){$('[id^="'+this.form_id_prefix+'section-"][style!="display:none;"][style!="display: none;"] [data-required-bypass]:not([type=hidden])',this.form_canvas_obj).attr("required","").attr("aria-required","true").removeAttr("data-required-bypass"),$('[id^="'+this.form_id_prefix+'section-"][style!="display:none;"][style!="display: none;"] [data-ecommerce-price-bypass]:not([type=hidden])',this.form_canvas_obj).removeAttr("data-ecommerce-price-bypass"),$('[id^="'+this.form_id_prefix+'field-wrapper-"][style!="display:none;"][style!="display: none;"] [data-required-bypass]:not([type=hidden])',this.form_canvas_obj).attr("required","").attr("aria-required","true").removeAttr("data-required-bypass"),$('[id^="'+this.form_id_prefix+'field-wrapper-"][style!="display:none;"][style!="display: none;"] [data-ecommerce-price-bypass]:not([type=hidden])',this.form_canvas_obj).removeAttr("data-ecommerce-price-bypass"),$('[id^="'+this.form_id_prefix+'section-"][style="display:none;"] [required]:not([type=hidden])').removeAttr("required").removeAttr("aria-required",this.form_canvas_obj).attr("data-required-bypass",""),$('[id^="'+this.form_id_prefix+'section-"][style="display:none;"] [data-ecommerce-price]:not([type=hidden])',this.form_canvas_obj).attr("data-ecommerce-price-bypass",""),$('[id^="'+this.form_id_prefix+'section-"][style="display: none;"] [required]:not([type=hidden])').removeAttr("required").removeAttr("aria-required",this.form_canvas_obj).attr("data-required-bypass",""),$('[id^="'+this.form_id_prefix+'section-"][style="display: none;"] [data-ecommerce-price]:not([type=hidden])',this.form_canvas_obj).attr("data-ecommerce-price-bypass",""),$('[id^="'+this.form_id_prefix+'field-wrapper-"][style="display:none;"] [required]:not([type=hidden])',this.form_canvas_obj).removeAttr("required").removeAttr("aria-required").attr("data-required-bypass",""),$('[id^="'+this.form_id_prefix+'field-wrapper-"][style="display:none;"] [data-ecommerce-price]:not([type=hidden])',this.form_canvas_obj).attr("data-ecommerce-price-bypass",""),$('[id^="'+this.form_id_prefix+'field-wrapper-"][style="display: none;"] [required]:not([type=hidden])',this.form_canvas_obj).removeAttr("required").removeAttr("aria-required").attr("data-required-bypass",""),$('[id^="'+this.form_id_prefix+'field-wrapper-"][style="display: none;"] [data-ecommerce-price]:not([type=hidden])',this.form_canvas_obj).attr("data-ecommerce-price-bypass",""),this.form_progress_process(),this.form_validate_real_time_process(e)},$.WS_Form.prototype.form_select_all=function(){var e=this;$("[data-select-all]:not([data-init-select-all])",this.form_canvas_obj).each(function(){$(this).attr("data-init-select-all","");var t=$(this).attr("name");$(this).removeAttr("name").removeAttr("value").attr("data-select-all",t),$(this).click(function(){var t=$(this).is(":checked"),a=$(this).attr("data-select-all");$('[name="'+a+'"]:enabled',e.form_canvas_obj).prop("checked",t)})})},$.WS_Form.prototype.form_cascade=function(){var e=this;$("[data-cascade-field-id]:not([data-init-cascade])",this.form_canvas_obj).each(function(){$(this).attr("data-init-cascade","");var t=$(this).closest("[data-type]"),a=$(this).attr("data-cascade-field-id"),i=t.attr("data-repeatable-index"),r=!1;i&&((r=$('[data-id="'+a+'"][data-repeatable-index="'+i+'"]',e.form_canvas_obj)).length||(r=!1));if(!r)r=$('[data-id="'+a+'"]',e.form_canvas_obj);r.length&&(r.on("change",function(){e.form_cascade_process(r,t)}),e.form_cascade_process(r,t))})},$.WS_Form.prototype.form_cascade_process=function(e,t){var a=t.attr("data-repeatable-index");a||(a=0);var i=e.attr("data-id"),r=e.attr("data-repeatable-index"),o=void 0!==r?"["+r+"]":"",s=e.attr("data-type"),_=this.field_name_prefix+i+o;switch(s){case"radio":case"price_radio":var n=$('[name="'+_+'[]"]:checked',this.form_canvas_obj).val();break;case"select":case"price_select":n=$('[name="'+_+'[]"]',this.form_canvas_obj).val();break;default:n=$('[name="'+_+'[]"]',this.form_canvas_obj).val()}void 0===n&&(n="");var c=t.attr("data-id");switch(t.attr("data-type")){case"radio":case"price_radio":void 0===n?$("[data-cascade-value]",t).hide():($('[data-cascade-value][data-cascade-value!="'+n+'"]',t).hide().prop("checked",!1).trigger("change"),$('[data-cascade-value="'+n+'"]',t).show(),$('[data-cascade-value="'+n+'"] input[type="radio"]',t).first().prop("checked",!0).trigger("change"));break;case"select":case"price_select":var d=$("select",t);void 0===this.cascade_select_cache[c]&&(this.cascade_select_cache[c]=[]),void 0===this.cascade_select_cache[c][a]?this.cascade_select_cache[c][a]=$("select option:not([data-placeholder])",t).clone():$("select",t).append(this.cascade_select_cache[c][a]),d.val("").trigger("change"),void 0===n?$("option[data-cascade-value]",d).remove():$('option:not([data-placeholder]):not([data-cascade-value="'+n+'"])',d).remove()}},$.WS_Form.prototype.form_date=function(){if(!$('[data-type="datetime"] input',this.form_canvas_obj).length)return!1;if("off"==$.WS_Form.settings_plugin.ui_datepicker)return!1;if("on"==$.WS_Form.settings_plugin.ui_datepicker||"native"==$.WS_Form.settings_plugin.ui_datepicker&&!this.native_date)this.form_date_process();else if(this.native_date){var e=this;$('[data-type="datetime"] input',this.form_canvas_obj).each(function(){var t=$(this).attr("value");if(""==t)return!1;var a=$(this).attr("data-date-type");try{switch(a){case"datetime-local":var i=new Date(t),r=new Date(i.valueOf()-6e4*i.getTimezoneOffset()).toISOString();t=r.substring(0,r.length-1)}}catch(t){e.error("error_datetime_default_value",t)}$(this).val(t)})}},$.WS_Form.prototype.form_date_process=function(e){var t=this;void 0!==jQuery().datetimepicker&&$('[data-type="datetime"] input',this.form_canvas_obj).each(function(){if("on"==$.WS_Form.settings_plugin.ui_datepicker||"native"==$.WS_Form.settings_plugin.ui_datepicker&&!t.native_date)if($(this).is("[readonly]"))$(this).datetimepicker("destroy");else{var e={allowBlank:!0,validateOnBlur:!1,dayOfWeekStart:1,scrollInput:!1,onChangeDateTime:function(e,t){t.trigger("change")}},a=$(this).attr("min");a&&(e.minDate=a);var i=$(this).attr("max");i&&(e.maxDate=i);var r=$(this).attr("data-year-start");r&&(e.yearStart=r);var o=$(this).attr("data-year-end");o&&(e.yearEnd=o);var s=$(this).attr("data-date-format")?$(this).attr("data-date-format"):ws_form_settings.date_format,_=$(this).attr("data-time-format")?$(this).attr("data-time-format"):ws_form_settings.time_format;switch($(this).attr("data-date-type")){case"date":e.format=s,e.formatDate=s,e.timepicker=!1;break;case"time":e.format=_,e.formatTime=_,e.datepicker=!1,e.step=15;break;case"month":e.format="F Y",e.formatDate="F Y",e.timepicker=!1;break;case"week":e.format="\\W\\e\\e\\k W, Y",e.timepicker=!1,e.weeks=!0;break;default:e.format=s+" "+_,e.formatDate=s,e.formatTime=_,e.step=15}$(this).datetimepicker(e)}})},$.WS_Form.prototype.form_color=function(){return!!$('[data-type="color"] input',this.form_canvas_obj).length&&("off"!=$.WS_Form.settings_plugin.ui_color&&void(("on"==$.WS_Form.settings_plugin.ui_color||"native"==$.WS_Form.settings_plugin.ui_color&&!this.native_color)&&this.form_color_process()))},$.WS_Form.prototype.form_color_process=function(e){var t=this;void 0!==jQuery().minicolors&&$('[data-type="color"] input',this.form_canvas_obj).each(function(){if("on"==$.WS_Form.settings_plugin.ui_color||"native"==$.WS_Form.settings_plugin.ui_color&&!t.native_color){var e=void 0!==t.framework.minicolors_args?t.framework.minicolors_args:{};$(this).minicolors(e)}})},$.WS_Form.prototype.form_inputmask=function(){$("[data-inputmask]",this.form_canvas_obj).each(function(){void 0!==$(this).inputmask&&$(this).inputmask({clearMaskOnLostFocus:!1})})},$.WS_Form.prototype.form_checkbox_min_max=function(){var e=this;$("[data-checkbox-min]:not([data-checkbox-min-max-init]),[data-checkbox-max]:not([data-checkbox-min-max-init])",this.form_canvas_obj).each(function(){var t=$(this).attr("data-checkbox-min"),a=$(this).attr("data-checkbox-max");if(void 0!==t||void 0!==a){var i=$(this).attr("data-id"),r=$("#"+e.form_id_prefix+"invalid-feedback-"+i,e.form_canvas_obj),o=$('<input type="number" id="'+e.form_id_prefix+"checkbox-min-max-"+i+'" data-checkbox-min-max style="display:none !important;" />',e.form_canvas_obj);void 0!==t&&o.attr("min",t),void 0!==a&&o.attr("max",a);var s=$('input[type="checkbox"]:checked',$(this)).length;o.attr("value",s),r.before(o),$('input[type="checkbox"]',$(this)).on("change",function(){var t=$(this).closest("[data-type]"),a=t.attr("data-id"),i=$("#"+e.form_id_prefix+"checkbox-min-max-"+a,e.form_canvas_obj),r=$('input[type="checkbox"]:checked',t).length;i.val(r)}),$(this).attr("data-checkbox-min-max-init","")}})},$.WS_Form.prototype.form_select_min_max=function(){var e=this;$("[data-select-min]:not([data-select-min-max-init]),[data-select-max]:not([data-select-min-max-init])",this.form_canvas_obj).each(function(){var t=$(this).attr("data-select-min"),a=$(this).attr("data-select-max");if(void 0!==t||void 0!==a){var i=$(this).attr("data-id"),r=$("#"+e.form_id_prefix+"invalid-feedback-"+i,e.form_canvas_obj),o=$('<input type="number" id="'+e.form_id_prefix+"select-min-max-"+i+'" data-select-min-max style="display:none !important;" />',e.form_canvas_obj);void 0!==t&&o.attr("min",t),void 0!==a&&o.attr("max",a);var s=$("select option:selected",$(this)).length;o.attr("value",s),r.before(o),$("select",$(this)).on("change",function(){var t=$(this).closest("[data-type]"),a=t.attr("data-id"),i=$("#"+e.form_id_prefix+"select-min-max-"+a,e.form_canvas_obj),r=$("select option:selected",t).length;i.val(r)}),$(this).attr("data-select-min-max-init","")}})},$.WS_Form.prototype.form_validation=function(){var e=this;!0===this.form_post_run&&this.form_obj.off(),this.get_object_meta_value(this.form,"submit_on_enter",!1)||this.form_obj.on("keydown",":input:not(textarea)",function(e){if(13==e.keyCode)return e.preventDefault(),!1}),this.form_obj.on("submit",function(t){e.trigger("submit-before"),t.preventDefault(),t.stopPropagation(),e.form_post_locked||(e.has_ecommerce&&e.form_ecommerce_calculate(),$(this).addClass(e.class_validated),e.form_validate($(this))?(e.trigger("submit-validate-success"),e.recaptchas_v2_invisible.length>0?e.recaptcha_v2_invisible_execute():e.form_post("submit")):e.trigger("submit-validate-fail"))})},$.WS_Form.prototype.form_validate=function(e){if(void 0===e)e=this.form_obj;this.trigger("validate-before");this.form.groups.length;var t=!1,a=!1,i=e[0].checkValidity();if(!i){var r=$(":invalid",e).not("fieldset");r&&(a=r.first(),t=this.get_group_index(a))}var o=this.get_field_value_fallback("signature",!1,"class_invalid_label",[]),s=this.get_field_value_fallback("signature",!1,"class_invalid_field",[]),_=this.get_field_value_fallback("signature",!1,"class_invalid_invalid_feedback",[]),n=this.get_field_value_fallback("signature",!1,"class_valid_label",[]),c=this.get_field_value_fallback("signature",!1,"class_valid_field",[]),d=this.get_field_value_fallback("signature",!1,"class_valid_invalid_feedback",[]);if(this.signatures.length>0)for(var l in this.signatures)if(this.signatures.hasOwnProperty(l)){var h=this.signatures[l],f=h.name,m=$('[data-name="'+f+'"]',e),p=m.closest("[data-id]"),v=$("label",p),u=p.attr("data-id"),b=p.attr("data-repeatable-index"),g=void 0!==b?"-repeat-"+b:"",j=$("#"+this.form_id_prefix+"invalid-feedback-"+u+g,e),w=h.required&&null==m.attr("data-required-bypass");h.signature.isEmpty()?(w&&(v.addClass(o.join(" ")),v.removeClass(n.join(" ")),m.addClass(s.join(" ")),m.removeClass(c.join(" ")),j.addClass(_.join(" ")),j.removeClass(d.join(" ")),!1===t&&(t=this.get_group_index(p)),!1===a&&(a=m),i=!1),m.on("mousedown touchstart",function(){var t=$(this),a=t.closest("[data-id]"),i=$("label",a),r=a.attr("data-id"),l=a.attr("data-repeatable-index"),h=void 0!==l?"-repeat-"+l:"",f=$("#"+this.form_id_prefix+"invalid-feedback-"+r+h,e);i.addClass(n.join(" ")),i.removeClass(o.join(" ")),t.addClass(c.join(" ")),t.removeClass(s.join(" ")),f.addClass(d.join(" ")),f.removeClass(_.join(" "))})):(v.addClass(n.join(" ")),v.removeClass(o.join(" ")),m.addClass(c.join(" ")),m.removeClass(s.join(" ")),j.addClass(d.join(" ")),j.removeClass(_.join(" ")))}var y=this.get_field_value_fallback("recaptcha",!1,"class_invalid_label",[]),k=this.get_field_value_fallback("recaptcha",!1,"class_invalid_field",[]),x=this.get_field_value_fallback("recaptcha",!1,"class_invalid_invalid_feedback",[]),S=this.get_field_value_fallback("recaptcha",!1,"class_valid_label",[]),F=this.get_field_value_fallback("recaptcha",!1,"class_valid_field",[]),W=this.get_field_value_fallback("recaptcha",!1,"class_valid_invalid_feedback",[]);if(this.recaptchas_v2_default.length>0)for(var C in this.recaptchas_v2_default)if(this.recaptchas_v2_default.hasOwnProperty(C)){var q=this.recaptchas_v2_default[C],O=q.id,z=q.name,I=$('[data-name="'+z+'"]',e),M=I.closest("[data-id]"),P=$("label",M),H=$("#"+this.form_id_prefix+"invalid-feedback-"+O,e);""==grecaptcha.getResponse(O)?(P.addClass(y.join(" ")),P.removeClass(S.join(" ")),I.addClass(k.join(" ")),I.removeClass(F.join(" ")),H.addClass(x.join(" ")),H.removeClass(W.join(" ")),!1===t&&(t=this.get_group_index(M)),!1===a&&(a=I),i=!1):(P.addClass(S.join(" ")),P.removeClass(y.join(" ")),I.addClass(F.join(" ")),I.removeClass(k.join(" ")),H.addClass(W.join(" ")),H.removeClass(x.join(" ")))}return i||(!1!==a&&this.get_object_meta_value(this.form,"invalid_field_focus",!0)&&(!1!==t?this.object_focus=a:a.focus()),!1!==t&&this.group_index_set(t)),this.trigger("validate-after"),i},$.WS_Form.prototype.form_validate_real_time=function(e){var t=this;for(var a in this.field_data_cache)if(this.field_data_cache.hasOwnProperty(a)){var i=this.field_data_cache[a].type,r=$.WS_Form.field_type_cache[i];if(void 0!==r.events){var o=r.events.event,s=this.field_data_cache[a].id,_=void 0!==r.submit_array&&r.submit_array;$('[data-type][data-id="'+s+'"]',this.form_canvas_obj).each(function(){var e=$(this).attr("data-repeatable-index"),a=void 0!==e?"["+e+"]":"";if(_)var i=$('[name="'+ws_form_settings.field_prefix+s+a+'[]"]:not([data-init-validate-real-time]), [data-name="'+ws_form_settings.field_prefix+s+a+'[]"]:not([data-init-validate-real-time])',t.form_canvas_obj);else i=$('[name="'+ws_form_settings.field_prefix+s+a+'"]:not([data-init-validate-real-time]), [data-name="'+ws_form_settings.field_prefix+s+a+'"]:not([data-init-validate-real-time])',t.form_canvas_obj);i.length&&(i.attr("data-init-validate-real-time",""),i.on(o+" blur",function(e){if(t.form_validate_real_time_process(!1),"blur"!==e.type){var a=i.attr("id");a&&t.form_calc(a)}}))})}}this.form_validate_real_time_process(!1)},$.WS_Form.prototype.form_validate_real_time_process=function(e){for(var t in this.form_valid=this.form_validate_silent(this.form_obj),e||this.form_canvas_obj.trigger("wsf-validate-silent"),null!==this.form_valid_old&&this.form_valid_old==this.form_valid||e||this.form_canvas_obj.trigger("wsf-validate"),this.form_valid_old=this.form_valid,this.form_validation_real_time_hooks)if(this.form_validation_real_time_hooks.hasOwnProperty(t)){var a=this.form_validation_real_time_hooks[t];void 0===a?delete this.form_validation_real_time_hooks[t]:a(this.form_valid,this.form,this.form_id,this.form_instance_id,this.form_obj,this.form_canvas_obj)}return this.form_valid},$.WS_Form.prototype.form_validate_real_time_register_hook=function(e){this.form_validation_real_time_hooks.push(e)},$.WS_Form.prototype.form_validate_silent=function(e){if(!e[0].checkValidity())return!1;if(this.signatures.length>0)for(var t in this.signatures)if(this.signatures.hasOwnProperty(t)){var a=this.signatures[t];if(void 0===a.canvas.attr("data-required-bypass")){if(!1===a.signature)return!1;if(a.signature.isEmpty()&&a.required)return!1}}if(this.recaptchas_v2_default.length>0)for(var i in this.recaptchas_v2_default)if(this.recaptchas_v2_default.hasOwnProperty(i)){var r=this.recaptchas_v2_default[i];if(!1===r.id)return!1;var o=r.recaptcha_id;if(void 0===$("#"+o,this.form_canvas_obj).attr("data-required-bypass")&&""==grecaptcha.getResponse(r.id))return!1}return!0},$.WS_Form.prototype.object_validate=function(e){var t=[];if(void 0===e)return!1;var a=this,i=!0;return $("[data-required]:not([data-required-bypass])",e).each(function(){var e=$(this).closest("[data-id]").attr("data-id"),r=a.field_data_cache[e].type,o=$(this).closest("[data-type]").attr("data-repeatable-index"),s=void 0!==o?"["+o+"]":"",_=ws_form_settings.field_prefix+e+s,n=!1;switch(r){case"radio":case"price_radio":if(void 0!==t[_])return;n=$(this)[0].checkValidity();break;case"signature":n=a.signature_get_response_by_name(_);break;case"email":n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test($(this).val());break;default:n=$(this)[0].checkValidity()}t[_]=!0,n||(i=!1)}),i},$.WS_Form.prototype.form_conditional=function(e){if(void 0===e)e=!0;var t=[];if(!1===this.conditional_cache){var a=this.get_object_meta_value(this.form,"conditional",!1);if(void 0===a.groups)return!1;if(void 0===a.groups[0])return!1;if(void 0===a.groups[0].rows)return!1;for(var i in a.groups[0].rows)if(a.groups[0].rows.hasOwnProperty(i)){var r=a.groups[0].rows[i];if((void 0===r.disabled||!r.disabled)&&void 0!==r.data&&void 0!==r.data[1]){var o=r.data[1];try{o=JSON.parse(o)}catch(e){o=!1}!1!==o&&(o.last_state=[],t=t.concat(this.conditional_events(o,!1,e)),!1===this.conditional_cache&&(this.conditional_cache=[]),this.conditional_cache.push(o))}}}else for(var i in this.conditional_cache){if(this.conditional_cache.hasOwnProperty(i))(o=this.conditional_cache[i]).last_state=[],t=t.concat(this.conditional_events(o,!0,e))}for(var s in t)if(t.hasOwnProperty(s)){var _=t[s];$(_,this.form_canvas_obj).attr("data-init-conditional","")}},$.WS_Form.prototype.conditional_events=function(e,t,a){if(void 0===t)t=!1;if(void 0===a)a=!0;var i=this,r=!1,o=[];for(var s in e.if)if(e.if.hasOwnProperty(s)){var _=e.if[s];if(void 0!==_.conditions)for(var n in _.conditions)if(_.conditions.hasOwnProperty(n)){var c=_.conditions[n];if(this.conditional_condition_check(c)){var d=c.object,l=c.object_id,h=!!c.object_row_id&&parseInt(c.object_row_id),f=c.logic,m=c.value,p=[];switch(d){case"form":p.push(this.conditional_event_get(d,this.form_id,0,this.form,f));break;case"group":if(void 0===this.group_data_cache[l])break;var v=this.group_data_cache[l];p.push(this.conditional_event_get(d,l,h,v,f));break;case"section":if(void 0===this.section_data_cache[l])break;v=this.section_data_cache[l];p.push(this.conditional_event_get(d,l,h,v,f));break;case"field":if(void 0===this.field_data_cache[l])break;v=this.field_data_cache[l];var u=$.WS_Form.field_type_cache[v.type],b=void 0!==v.section_repeatable_section_id;p.push(this.conditional_event_get(d,l,h,v,f,b));var g=[];switch(f){case"field_match":case"field_match_not":var j=m;if(0==parseInt(j))break;if(void 0===this.field_data_cache[j])break;var w=this.field_data_cache[j];b=void 0!==w.section_repeatable_section_id;p.push(this.conditional_event_get("field",j,!1,w,f,b)),g.field_match_id=this.form_id_prefix+"field-"+j}var y=this.get_field_value_fallback(u,!1,"attribute_"+f,!1);if("object"==typeof y){var k="#"+this.form_id_prefix+d+"-"+l;for(var x in y)if(y.hasOwnProperty(x)){var S=y[x];S=this.mask_parse(S,g),$(k,this.form_canvas_obj).attr(x,S)}}}for(var F in p)if(p.hasOwnProperty(F)){var W=p[F],C=(k=!1,W.repeatable);if("wsf-validate"==W.event||"wsf-validate-silent"==W.event||"wsf-section-repeatable"==W.event){if(!a)continue;"wsf-section-repeatable"==W.event&&(W.event="wsf-section-repeatable-"+l);var q=this.form_canvas_obj;k=null}else if("wsf-submit"==W.event||"wsf-save"==W.event||"wsf-submit wsf-save"==W.event||"wsf-complete"==W.event||"wsf-error"==W.event)q=$(document),k=null;else{q=this.form_canvas_obj;switch(W.object){case"form":k=null;break;case"group":k='[href="#'+this.form_id_prefix+"tab-content-"+l+'"]';break;case"section":k="[id^="+this.form_id_prefix+W.object+"-"+W.object_id+'][data-id="'+W.object_id+'"]';break;case"field":switch(this.field_data_cache[l].type){case"radio":case"price_radio":case"checkbox":case"price_checkbox":k='[name^="'+ws_form_settings.field_prefix+l+'["]';break;case"select":case"price_select":if(C)k='[id^="'+this.form_id_prefix+W.object+"-"+W.object_id+'-repeat-"]';else k="#"+this.form_id_prefix+W.object+"-"+W.object_id;break;default:if(C)k='[id^="'+this.form_id_prefix+W.object+"-"+W.object_id+(!1!==W.object_row_id?"-row-"+W.object_row_id:"")+'-repeat-"]';else k="#"+this.form_id_prefix+W.object+"-"+W.object_id+(!1!==W.object_row_id?"-row-"+W.object_row_id:"")}}}if(W.create&&!1!==W.event&&!1!==k){if(o.push(k),0==$(k+"[data-init-conditional]",this.form_canvas_obj).length)switch(this.log("log_conditional_event",(null===k?this.language("debug_form"):k)+" ("+W.event+")","conditional"),W.event){case"recaptcha":this.recaptchas_conditions.push(function(){i.conditional_process(e,!1,!1,0,!1)});break;default:q.on(W.event,k,function(t,a,r,o){if(void 0===r||void 0===o||i.form_id===r||i.form_instance_id===o){var s=$(this).closest("[data-type]"),_=s.attr("data-repeatable-index")?s.attr("data-repeatable-index"):0;i.conditional_process(e,!1,$(this),_,t)}}),$(k,this.form_canvas_obj).attr("data-populate-event",W.event)}r&&!t||($(k+(t?"":":not([data-init-conditional])"),this.form_canvas_obj).each(function(){var t=$(this).closest("[data-type]"),a=t.attr("data-repeatable-index")?t.attr("data-repeatable-index"):0;i.conditional_process(e,!0,$(this),a,!1)}),r=!0)}}}}}return o},$.WS_Form.prototype.conditional_event_get=function(e,t,a,i,r,o){if(void 0===o)o=!1;var s={object:e,object_id:t,object_row_id:a,create:!0,event:!1,row:!1,repeatable:o};switch(e){case"field":var _=$.WS_Form.field_type_cache[i.type];void 0!==_.conditional&&(void 0!==_.conditional.exclude_condition&&(s.create=!_.conditional.exclude_condition),void 0!==_.conditional.condition_event&&(s.event=_.conditional.condition_event),void 0!==_.conditional["object_event.row"]&&_.conditional["object_event.row"]&&!1!==a&&(s.row=!0))}var n=$.WS_Form.settings_form.conditional.objects[e].logic;return void 0!==n[r]&&void 0!==n[r].event&&(s.event=n[r].event),s},$.WS_Form.prototype.conditional_process=function(e,t,a,i,r){if(void 0===e.if)return!1;if(void 0===e.then)return!1;if(void 0===e.else)return!1;var o=!1;for(var s in e.if)if(e.if.hasOwnProperty(s)){var _=e.if[s];if(void 0!==_.conditions){var n=!1,c="";for(var d in _.conditions)if(_.conditions.hasOwnProperty(d)){var l=_.conditions[d];if(this.conditional_condition_check(l)){var h=l.object,f=l.object_id,m=void 0!==l.object_row_id&&parseInt(l.object_row_id),p=l.logic,v=l.value,u=void 0===l.case_sensitive||l.case_sensitive,b=d>0?void 0===l.logic_previous?"||":l.logic_previous:"||",g=ws_form_settings.field_prefix+f;if($.WS_Form.debug_rendered){switch(h){case"form":var j=this.form_obj;break;case"group":j=this.group_data_cache[f];break;case"section":j=this.section_data_cache[f];break;case"field":j=this.field_data_cache[f]}var w=$.WS_Form.settings_form.conditional,y=w.logic_previous;if($.WS_Form.debug_rendered){var k=w.objects[h].logic;if(void 0!==k[p])var x=k[p].text.toUpperCase();else x="";if(void 0!==y[b])var S=y[b].text.toUpperCase();else S="";c="<strong>"+(d>0?S+" ":"")+"IF ["+this.html_encode(j.label)+"] "+x+(""!=v?" '"+v+"'":"")+"</strong> ("+(void 0!==j.type?"Type: "+j.type+" | ":"")+"ID: "+f+(m?" | Row ID: "+m:"")+") "}}switch(h){case"form":var F="#"+this.form_obj_id;break;case"group":F="#"+this.form_id_prefix+"tab-content-"+f;break;case"section":F="#"+this.form_id_prefix+h+"-"+f;break;case"field":var W=i>0?"-repeat-"+i:"",C="#"+this.form_id_prefix+h+"-"+f+"-row-"+m+W,q=(F="#"+this.form_id_prefix+h+"-"+f+W,$('[data-type][data-id="'+f+'"]',this.form_canvas_obj))}var O=$(F,this.form_canvas_obj).val();!u&&O&&(O=O.toLowerCase(),v=v.toLowerCase());if(["r==","r!=","r>","r<","r>=","r<="].includes(p)){if(r.type!="wsf-section-repeatable-"+f)continue;var z=$('[data-repeatable][data-id="'+f+'"]',this.form_canvas_obj);if(!z.length)continue;O=z.length}v=this.parse_variables_process(v).output;var I=!1;switch(p){case"==":I=this.get_number(O)==this.get_number(v);break;case"!=":I=this.get_number(O)!=this.get_number(v);break;case">":""!=O&&(I=this.get_number(O)>this.get_number(v));break;case"<":""!=O&&(I=this.get_number(O)<this.get_number(v));break;case">=":""!=O&&(I=this.get_number(O)>=this.get_number(v));break;case"<=":""!=O&&(I=this.get_number(O)<=this.get_number(v));break;case"d>":""!=O&&""!=v&&(I=Date.parse(O)>Date.parse(v));break;case"d<":""!=O&&""!=v&&(I=Date.parse(O)<Date.parse(v));break;case"d==":""!=O&&""!=v&&(I=Date.parse(O)==Date.parse(v));break;case"d!=":""!=O&&""!=v&&(I=Date.parse(O)!=Date.parse(v));break;case"r==":I=this.get_number(O)==this.get_number(v);break;case"r!=":I=this.get_number(O)!=this.get_number(v);break;case"r>":""!=O&&(I=this.get_number(O)>this.get_number(v));break;case"r<":""!=O&&(I=this.get_number(O)<this.get_number(v));break;case"r>=":""!=O&&(I=this.get_number(O)>=this.get_number(v));break;case"r<=":""!=O&&(I=this.get_number(O)<=this.get_number(v));break;case"section_repeatable":e.last_state[i]="",I=r.type=="wsf-section-repeatable-"+f;break;case"equals":case"c==":I=O==v;break;case"equals_not":case"c!=":I=O!=v;break;case"contains":case"contains_not":I=-1!=O.indexOf(v),"contains_not"==p&&(I=!I);break;case"starts":case"starts_not":I=O.startsWith(v),"starts_not"==p&&(I=!I);break;case"ends":case"ends_not":I=O.endsWith(v),"ends_not"==p&&(I=!I);break;case"blank":case"blank_not":I=""==O,"blank_not"==p&&(I=!I);break;case"checked":case"checked_not":I=$(C,this.form_canvas_obj).is(":checked"),"checked_not"==p&&(I=!I);break;case"checked_any":case"checked_any_not":I=$("input:checked",q).length>0,"checked_any_not"==p&&(I=!I);break;case"checked_value_equals":case"checked_value_equals_not":I=$('input[value="'+v+'"]',q).prop("checked");"checked_value_equals_not"==p&&(I=!I);break;case"selected":case"selected_not":I=$('option[data-id="'+m+'"]',$(F,this.form_canvas_obj)).prop("selected");"selected_not"==p&&(I=!I);break;case"selected_any":case"selected_any_not":I=$("option:not([data-placeholder]):selected",$(F,this.form_canvas_obj)).length>0;"selected_any_not"==p&&(I=!I);break;case"selected_value_equals":case"selected_value_equals_not":I=$('option[value="'+v+'"]',$(F,this.form_canvas_obj)).prop("selected");"selected_value_equals_not"==p&&(I=!I);break;case"regex_email":case"regex_email_not":I=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(O),"regex_email_not"==p&&(I=!I);break;case"regex_url":case"regex_url_not":I=/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi.test(O),"regex_url_not"==p&&(I=!I);break;case"regex":case"regex_not":I=new RegExp(v).test(O),"regex_not"==p&&(I=!I);break;case"wsf-submit":case"wsf-save":case"wsf-submit_save":case"wsf-complete":case"wsf-error":case"click":case"mousedown":case"mouseup":case"mouseover":case"mouseout":case"touchstart":case"touchmove":case"touchend":case"touchcancel":case"focus":case"blur":case"change":case"change_input":case"input":case"keyup":case"keydown":e.last_state[i]="",I=p==r.type||"change_input"==p&&-1!=["change","input"].indexOf(r.type)||"wsf_submit_save"==p&&-1!=["wsf-submit","wsf-save"].indexOf(r.type);break;case"ch>":I=360*this.hex_to_hsl(O).h>v;break;case"ch<":I=360*this.hex_to_hsl(O).h<v;break;case"cs>":I=100*this.hex_to_hsl(O).s>v;break;case"cs<":I=100*this.hex_to_hsl(O).s<v;break;case"cl>":I=100*this.hex_to_hsl(O).l>v;break;case"cl<":I=100*this.hex_to_hsl(O).l<v;break;case"recaptcha":case"recaptcha_not":I=""!=this.recaptcha_get_response_by_name(g),"recaptcha_not"==p&&(I=!I);break;case"signature":case"signature_not":I=this.signature_get_response_by_name(g),"signature_not"==p&&(I=!I);break;case"file":case"file_not":I=this.file_get_count_by_field_id(f)>0,"file_not"==p&&(I=!I);break;case"f>":I=this.file_get_count_by_field_id(f)>v;break;case"f<":I=this.file_get_count_by_field_id(f)<v;break;case"f==":case"f!=":I=this.file_get_count_by_field_id(f)==v,"f!="==p&&(I=!I);break;case"field_match":case"field_match_not":var M=parseInt(v);if(M>0){var P="#"+this.form_id_prefix+"field-"+M;I=$(P,this.form_canvas_obj).val()==O,"field_match_not"==p&&(I=!I)}break;case"cc==":I=O.length==parseInt(v);break;case"cc!=":I=O.length!=parseInt(v);break;case"cc>":I=O.length>parseInt(v);break;case"cc<":I=O.length<parseInt(v);break;case"cw==":I=this.get_count_words(O)==parseInt(v);break;case"cw!=":I=this.get_count_words(O)!=parseInt(v);break;case"cw>":I=this.get_count_words(O)>parseInt(v);break;case"cw<":I=this.get_count_words(O)<parseInt(v);break;case"validate":case"validate_not":switch(h){case"form":I=this.form_valid;break;case"group":case"section":I=this.object_validate($(F,this.form_canvas_obj));break;case"field":I=this.object_validate(q)}"validate_not"==p&&(I=!I)}n=this.conditional_logic_previous(n,I,b)}}b=void 0===_.logic_previous?"||":_.logic_previous;o=this.conditional_logic_previous(o,n,b)}}var H=!1;o?!0===e.last_state[i]&&void 0!==e.last_state[i]||(H="then",e.last_state[i]=!0):!1===e.last_state[i]&&void 0!==e.last_state[i]||(H="else",e.last_state[i]=!1),!1!==H&&($.WS_Form.debug_rendered&&this.log("log_conditional_fired_"+H,c,"conditional"),this.conditional_process_actions(e[H],H,a,i)),!t&&this.has_ecommerce&&this.form_ecommerce_calculate()},$.WS_Form.prototype.hex_to_hsl=function(e){var t=this.hex_to_rgb(e);return!1!==t&&this.rgb_to_hsl(t)},$.WS_Form.prototype.hex_to_rgb=function(e){if(""==e)return!1;var t="#"==e[0];if(t&&7!=e.length)return!1;if(!t&&6!=e.length)return!1;e=t?e.substr(1):e;return{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16)}},$.WS_Form.prototype.rgb_to_hsl=function(e){if(void 0===e.r)return!1;if(void 0===e.g)return!1;if(void 0===e.b)return!1;var t=e.r,a=e.g,i=e.b;t/=255,a/=255,i/=255;var r,o,s=Math.max(t,a,i),_=Math.min(t,a,i),n=(s+_)/2;if(s==_)r=o=0;else{var c=s-_;switch(o=n>.5?c/(2-s-_):c/(s+_),s){case t:r=(a-i)/c+(a<i?6:0);break;case a:r=(i-t)/c+2;break;case i:r=(t-a)/c+4}r/=6}return{h:r,s:o,l:n}},$.WS_Form.prototype.conditional_process_actions=function(actions,type,obj,object_repeatable_index){var actions_processed=0,process_required=!1;for(var action_index in actions)if(actions.hasOwnProperty(action_index)){var action_single=actions[action_index];if(this.conditional_action_check(action_single)){var object=action_single.object,object_id=action_single.object_id,object_row_id=void 0!==action_single.object_row_id&&action_single.object_row_id,action=action_single.action,value=void 0!==action_single.value&&this.parse_variables_process(action_single.value,object_repeatable_index).output,debug_action_value=value,field_name=ws_form_settings.field_prefix+object_id,repeatable_suffix=object_repeatable_index>0?"-repeat-"+object_repeatable_index:"";switch(object){case"form":var obj_wrapper=this.form_obj,obj=this.form_obj;break;case"field":var object_wrapper=$('[data-type][data-id="'+object_id+'"]',this.form_canvas_obj),obj_section_id=this.get_section_id(obj),object_section_id=this.get_section_id(object_wrapper.first()),same_section=obj_section_id==object_section_id;if(same_section)var object_wrapper=obj.closest("[data-type]"),object_repeatable_index=(object_wrapper.attr("data-repeatable-index"),object_wrapper.attr("data-repeatable-index")),object_repeatable_suffix=object_repeatable_index>0?"-repeat-"+object_repeatable_index:"",object_selector_wrapper="#"+this.form_id_prefix+object+"-wrapper-"+object_id+(object_row_id?"-row-"+object_row_id:"")+object_repeatable_suffix,object_selector="#"+this.form_id_prefix+object+"-"+object_id+(object_row_id?"-row-"+object_row_id:"")+object_repeatable_suffix;else var object_selector_wrapper='[id^="'+this.form_id_prefix+object+"-wrapper-"+object_id+(object_row_id?"-row-"+object_row_id:"")+'"][data-id="'+object_id+'"]',object_selector='[id^="'+this.form_id_prefix+object+"-"+object_id+(object_row_id?"-row-"+object_row_id:"")+'"]';var obj_wrapper=$(object_selector_wrapper,this.form_canvas_obj),obj=$(object_selector,this.form_canvas_obj);break;case"section":var object_wrapper=$("#"+this.form_id_prefix+"section-"+object_id,this.form_canvas_obj),obj_section_id=this.get_section_id(obj),object_section_id=this.get_section_id(object_wrapper.first()),same_section=obj_section_id==object_section_id;if(same_section)var object_repeatable_index=(object_wrapper.attr("data-repeatable-index"),object_wrapper.attr("data-repeatable-index")),object_repeatable_suffix=object_repeatable_index>0?"-repeat-"+object_repeatable_index:"",object_selector_wrapper=object_selector="#"+this.form_id_prefix+object+"-"+object_id+object_repeatable_suffix,object_selector="#"+this.form_id_prefix+object+"-"+object_id+object_repeatable_suffix;else var object_selector_wrapper=object_selector='[id^="'+this.form_id_prefix+object+'-"][data-id="'+object_id+'"]';var obj_wrapper=$(object_selector_wrapper,this.form_canvas_obj),obj=$(object_selector,this.form_canvas_obj);break;default:var object_selector_wrapper=object_selector="#"+this.form_id_prefix+object+"-"+object_id+repeatable_suffix,obj_wrapper=$(object_selector_wrapper,this.form_canvas_obj),obj=$(object_selector,this.form_canvas_obj)}switch(action){case"value":case"value_number":case"value_datetime":case"value_tel":case"value_email":case"value_textarea":obj.attr("data-value-old",function(){return $(this).val()}).val(value).filter(function(){return $(this).val()!==$(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old");break;case"value_range":case"value_rating":obj.attr("data-value-old",function(){return $(this).val()}).val(value).filter(function(){return $(this).val()!==$(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old");break;case"value_color":"function"==typeof obj.minicolors?obj.attr("data-value-old",function(){return $(this).val()}).minicolors("value",{color:value}).filter(function(){return $(this).val()!==$(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old"):obj.attr("data-value-old",function(){return $(this).val()}).val(value).filter(function(){return $(this).val()!==$(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old");break;case"html":$("[data-html]",obj_wrapper).html(value);break;case"text_editor":$("[data-text-editor]",obj_wrapper).html(value);break;case"button_html":obj.html(value);break;case"class_add_wrapper":obj_wrapper.addClass(value),debug_action_value=this.language("debug_action_added");break;case"class_remove_wrapper":obj_wrapper.removeClass(value),debug_action_value=this.language("debug_action_removed");break;case"class_add_field":obj.addClass(value),debug_action_value=this.language("debug_action_added");break;case"class_remove_field":obj.removeClass(value),debug_action_value=this.language("debug_action_removed");break;case"reset_file":obj.attr("data-value-old",function(){return $(this).val()}).val("").filter(function(){return $(this).val()!==$(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old"),debug_action_value=this.language("debug_action_reset");break;case"reset_signature":this.signature_clear_by_name(field_name),debug_action_value=this.language("debug_action_reset");break;case"value_row_select":case"value_row_deselect":var trigger=$(object_selector+":enabled",this.form_canvas_obj).prop("selected")!==("value_row_select"==action);$(object_selector+":enabled").prop("selected",!1).prop("selected","value_row_select"==action),trigger&&$(object_selector+":enabled",this.form_canvas_obj).closest("select").trigger("change"),debug_action_value=this.language("debug_action_"+("value_row_select"==action?"selected":"deselected"));break;case"value_row_select_value":case"value_row_deselect_value":var trigger=$('option[value="'+this.html_encode(value)+'"]',obj).prop("selected")!==("value_row_select_value"==action);$('option[value="'+this.html_encode(value)+'"]',obj).prop("selected","value_row_select_value"==action),trigger&&obj.trigger("change"),debug_action_value=this.language("debug_action_"+("value_row_select"==action?"selected_value":"deselected_value"));break;case"value_row_reset":obj_wrapper.find("option:enabled").prop("selected",!0).prop("selected",!1).trigger("change"),debug_action_value=this.language("debug_action_reset");break;case"value_row_check":case"value_row_uncheck":var trigger=$(object_selector+":enabled",this.form_canvas_obj).prop("checked")!==("value_row_check"==action);$(object_selector+":enabled").prop("checked","value_row_check"==action),trigger&&$(object_selector+":enabled",this.form_canvas_obj).trigger("change"),debug_action_value=this.language("debug_action_"+("value_row_check"==action?"checked":"unchecked"));break;case"value_row_check_value":case"value_row_uncheck_value":var trigger=$('input[value="'+this.html_encode(value)+'"]',obj_wrapper).prop("checked")!==("value_row_check_value"==action);$('input[value="'+this.html_encode(value)+'"]',obj_wrapper).prop("checked","value_row_check_value"==action),trigger&&$('input[value="'+this.html_encode(value)+'"]',obj_wrapper).trigger("change"),debug_action_value=this.language("debug_action_"+("value_row_check_value"==action?"checked":"unchecked"));break;case"value_row_required":case"value_row_not_required":obj.prop("required","value_row_required"==action).removeAttr("data-init-required"),debug_action_value=this.language("debug_action_"+("value_row_required"==action?"required":"not_required")),process_required=!0;break;case"value_row_disabled":case"value_row_not_disabled":obj.attr("disabled","value_row_disabled"==action),debug_action_value=this.language("debug_action_"+("value_row_disabled"==action?"disabled":"enabled"));break;case"value_row_visible":case"value_row_not_visible":"value_row_not_visible"===action?obj.parent().hide():obj.parent().show(),debug_action_value=this.language("debug_action_"+("value_row_not_visible"==action?"hide":"show"));break;case"value_row_focus":obj.focus(),debug_action_value=this.language("debug_action_focussed");break;case"value_row_class_add":obj.addClass(value),debug_action_value=this.language("debug_action_added");break;case"value_row_class_remove":obj.removeClass(value),debug_action_value=this.language("debug_action_removed");break;case"value_row_set_custom_validity":var invalid_feedback_obj=$("#"+this.form_id_prefix+"invalid-feedback-"+object_id+"-row-"+object_row_id,object_wrapper);this.set_invalid_feedback(obj,invalid_feedback_obj,value,object_id,object_row_id);break;case"visibility":switch(object){case"section":case"field":"off"===value?(obj_wrapper.hide(),this.form_required_bypass(!0)):(obj_wrapper.show(),this.form_required_bypass(!0),"section"==object&&this.signatures_redraw(!1,object_id),"field"==object&&this.signatures_redraw(!1,!1,object_id)),debug_action_value=this.language("debug_action_"+("off"==value?"hide":"show"))}break;case"set_row_count":var sections=$('[data-repeatable][data-id="'+object_id+'"]',this.form_canvas_obj);if(!sections.length)break;var section_count=sections.length;if(isNaN(value))break;var section_count_required=parseInt(value),section=this.section_data_cache[object_id],section_repeat_min=this.get_object_meta_value(section,"section_repeat_min",1);section_repeat_min=""==section_repeat_min||isNaN(section_repeat_min)?1:parseInt(section_repeat_min),section_repeat_min<1&&(section_repeat_min=1);var section_repeat_max=this.get_object_meta_value(section,"section_repeat_max",!1);if(section_repeat_max=""!=section_repeat_max&&!isNaN(section_repeat_min)&&parseInt(section_repeat_max),section_count_required<section_repeat_min&&(section_count_required=section_repeat_min),!1!==section_repeat_max&&section_count_required>section_repeat_max&&(section_count_required=section_repeat_max),section_count<section_count_required){for(var section_clone_this=sections.last(),rows_to_add=section_count_required-section_count,add_count=0;add_count<rows_to_add;add_count++)this.section_clone(section_clone_this);this.section_clone_init(object_id),this.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+object_id)}if(section_count>section_count_required){for(var rows_to_delete=section_count-section_count_required,delete_count=0;delete_count<rows_to_delete;delete_count++){var sections=$('[data-repeatable][data-id="'+object_id+'"]',this.form_canvas_obj);sections.last().remove()}this.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+object_id)}this.form_section_repeatable();break;case"disabled":switch(object){case"section":obj_wrapper.prop("disabled","on"==value);break;case"field":obj.prop("disabled","on"==value);var class_disabled_array=this.get_field_value_fallback(obj_wrapper.attr("data-type"),!1,"class_disabled",!1);"on"==value?(!1!==class_disabled_array&&obj.addClass(class_disabled_array.join(" ")),obj.css({"pointer-events":"none"})):(!1!==class_disabled_array&&obj.removeClass(class_disabled_array.join(" ")),obj.attr("style",""))}debug_action_value=this.language("debug_action_"+("on"==value?"disabled":"enabled"));break;case"required":var field=this.field_data_cache[object_id];switch(field.type){case"radio":case"price_radio":$('[name="'+field_name+'[]"]',object_wrapper).prop("required","on"==value).removeAttr("data-init-required");break;default:obj.prop("required","on"==value).removeAttr("data-init-required")}debug_action_value=this.language("debug_action_"+("on"==value?"required":"not_required")),process_required=!0;break;case"required_signature":obj.attr("required","on"==value).removeAttr("data-init-required");var signature=void 0!==this.signatures_by_name[field_name]&&this.signatures_by_name[field_name];!1!==signature&&(signature.required="on"==value),debug_action_value=this.language("debug_action_"+("on"==value?"required":"not_required")),process_required=!0;break;case"readonly":obj.prop("readonly","on"==value),debug_action_value=this.language("debug_action_"+("on"==value?"read_only":"not_read_only")),this.form_date();break;case"set_custom_validity":var invalid_feedback_obj=$("#"+this.form_id_prefix+"invalid-feedback-"+object_id,object_wrapper);this.set_invalid_feedback(obj,invalid_feedback_obj,value,object_id);break;case"click":switch(object){case"group":var tab_selector='[href="#'+this.form_id_prefix+"tab-content-"+object_id+'"]';$(tab_selector).click();break;case"field":obj.click()}debug_action_value=this.language("debug_action_clicked");break;case"focus":obj.focus(),debug_action_value=this.language("debug_action_focussed");break;case"action_run":-1!==this.conditional_actions_run_save.indexOf(object_id)&&this.form_post("action",object_id);break;case"action_run_on_save":-1===this.conditional_actions_run_save.indexOf(object_id)&&(this.conditional_actions_run_save.push(object_id),this.conditional_actions_changed=!0);break;case"action_run_on_submit":-1===this.conditional_actions_run_submit.indexOf(object_id)&&(this.conditional_actions_run_submit.push(object_id),this.conditional_actions_changed=!0);break;case"action_do_not_run_on_save":var object_id_index=this.conditional_actions_run_save.indexOf(object_id);-1!==object_id_index&&(this.conditional_actions_run_save.splice(object_id_index,1),this.conditional_actions_changed=!0);break;case"action_do_not_run_on_submit":var object_id_index=this.conditional_actions_run_submit.indexOf(object_id);-1!==object_id_index&&(this.conditional_actions_run_submit.splice(object_id_index,1),this.conditional_actions_changed=!0);break;case"javascript":eval(value);break;case"form_save":this.form_post("save");break;case"form_submit":this.form_obj.submit()}if(actions_processed++,$.WS_Form.debug_rendered){var object_single_type=!1;switch(object){case"form":var object_single_type=this.language("debug_action_form"),object_single_label=this.language("debug_action_form");break;case"group":if(void 0!==this.group_data_cache[object_id])var object_single=this.group_data_cache[object_id],object_single_type=this.language("debug_action_group"),object_single_label=object_single.label;break;case"section":if(void 0!==this.section_data_cache[object_id])var object_single=this.section_data_cache[object_id],object_single_type=this.language("debug_action_section"),object_single_label=object_single.label;break;case"field":if(void 0!==this.field_data_cache[object_id])var object_single=this.field_data_cache[object_id],object_single_type=object_single.type,object_single_label=object_single.label;break;case"action":if(void 0!==this.action_data_cache[object_id])var object_single=this.action_data_cache[object_id],object_single_type=this.language("debug_action_action"),object_single_label=object_single.label}if(!1!==object_single_type){var conditional_settings=$.WS_Form.settings_form.conditional,conditional_settings_objects=conditional_settings.objects,conditional_settings_actions=conditional_settings_objects[object].action,conditional_settings_action=conditional_settings_actions[action],action_description=conditional_settings_action.text.toUpperCase();void 0!==conditional_settings_action.values&&"object"==typeof conditional_settings_action.values&&void 0!==conditional_settings_action.values[value]&&(debug_action_value=conditional_settings_action.values[value].text);var log_description="<strong>["+this.html_encode(object_single_label)+"] "+action_description+(!1!==debug_action_value&&""!=debug_action_value?" '"+this.html_encode(debug_action_value)+"'":"")+"</strong> ("+this.language("debug_action_type")+": "+object_single_type+" | ID: "+object_id+(object_row_id?" | "+this.language("debug_action_row")+" ID: "+object_row_id:"")+")";this.log("log_conditional_action_"+type,log_description,"conditional")}}}}0==actions_processed&&this.log("log_conditional_action_not_found_"+type,"","conditional"),process_required&&this.form_required()},$.WS_Form.prototype.conditional_logic_previous=function(e,t,a){switch(a){case"||":e|=t;break;case"&&":e&=t}return e},$.WS_Form.prototype.conditional_condition_check=function(e){return void 0!==e.id&&(void 0!==e.object&&(void 0!==e.object_id&&(void 0!==e.object_row_id&&(void 0!==e.logic&&(void 0!==e.value&&(void 0!==e.case_sensitive&&(void 0!==e.logic_previous&&(""!=e.id&&(0!=e.id&&(""!=e.object&&(""!=e.object_id&&""!=e.logic)))))))))))},$.WS_Form.prototype.conditional_action_check=function(e){return void 0!==e.object&&(void 0!==e.object_id&&(void 0!==e.action&&(""!=e.object&&(""!=e.object_id&&""!=e.action))))},$.WS_Form.prototype.form_tabs=function(){if(this.form.groups.length<=1)return!1;var e=this,t=this.get_object_meta_value(this.form,"cookie_tab_index")?this.cookie_get("tab_index",0):0;if(this.form_progress_tabs(t),$.WS_Form.settings_plugin.framework==ws_form_settings.framework_admin){var a=$(".wsf-group-tabs",this.form_canvas_obj);a.hasClass("wsf-tabs")&&this.tabs_destroy(),this.tabs(a,{active:t})}else this.group_index_set(t);var i=this.framework.tabs.public;if(void 0!==i.event_js){var r=i.event_js,o=void 0!==i.event_type_js&&i.event_type_js,s=void 0!==i.event_selector_wrapper_js&&i.event_selector_wrapper_js,_=void 0!==i.event_selector_active_js&&i.event_selector_active_js;switch(o){case"wrapper":var n=$(s,this.form_canvas_obj);break;default:n=$('[href^="#'+this.form_id_prefix+'tab-content-"]',this.form_canvas_obj)}n.on(r,function(t,a){switch(o){case"wrapper":var i=$(_,n).index();break;default:i=$(this).parent().index()}e.get_object_meta_value(e.form,"cookie_tab_index")&&e.cookie_set("tab_index",i),e.form_progress_tabs(i),e.signatures_redraw(i),e.form_textarea(),!1!==e.object_focus&&(e.object_focus.focus(),e.object_focus=!1)})}this.get_object_meta_value(this.form,"tab_validation")&&(this.form_canvas_obj.on("wsf-validate-silent",function(){e.tab_validation()}),this.tab_validation())},$.WS_Form.prototype.tab_validation=function(){var e=this,t=!0,a=$('[href^="#'+this.form_id_prefix+'tab-content-"]',this.form_canvas_obj),i=a.length,r=0;a.each(function(e){if($($(this).attr("href")).is(":visible"))return r=e,!1}),a.each(function(a){if(e.tab_validation_previous($(this),t),a<i-1){if(!0===t)var o=e.object_validate($($(this).attr("href")));else o=!1;e.tab_validation_current($(this),o),t=o}!o&&r>a&&e.group_index_set(a)})},$.WS_Form.prototype.tab_validation_current=function(e,t){var a=e.attr("href"),i=$(a,this.form_canvas_obj),r=$('button[data-action="wsf-tab_next"]',i);t?r.removeAttr("disabled"):r.attr("disabled","")},$.WS_Form.prototype.tab_validation_previous=function(e,t){var a=this.framework.tabs.public;void 0!==a.class_disabled&&(t?e.removeClass(a.class_disabled):e.addClass(a.class_disabled)),void 0!==a.class_parent_disabled&&(t?e.parent().removeClass(a.class_parent_disabled):e.parent().addClass(a.class_parent_disabled))},$.WS_Form.prototype.form_post=function(e,t){if(void 0===e)e="save";if(void 0===t)t=0;var a="submit"==e;this.trigger(e);var i=this;this.form_post_lock(),this.form_add_hidden_input("wsf_form_id",this.form_id),this.form_add_hidden_input("wsf_hash",this.hash),this.form_add_hidden_input("wsf_duration",Math.round(((new Date).getTime()-this.date_start)/1e3)),this.form_add_hidden_input(ws_form_settings.wsf_nonce_field_name,ws_form_settings.wsf_nonce),"submit"==e&&(this.date_start=!1,this.cookie_set("date_start",!1,!1),this.form_timer()),void 0!==ws_form_settings.post_id&&ws_form_settings.post_id>0&&this.form_add_hidden_input("wsf_post_id",ws_form_settings.post_id);var r=$("[data-required-bypass]",this.form_canvas_obj).map(function(){var e=$(this).attr("data-name")?$(this).attr("data-name"):$(this).attr("name");return e=e.replace("[]","")}).get(),o=(r=r.filter(function(e,t,a){return a.indexOf(e)===t})).join();for(var s in this.form_add_hidden_input("wsf_bypass",o),this.form_add_hidden_input("wsf_post_mode",e),t>0&&this.form_add_hidden_input("wsf_action_id",t),this.signatures)if(this.signatures.hasOwnProperty(s)){var _=this.signatures[s];if(_.signature.isEmpty()||0==_.canvas_element.width||0==_.canvas_element.height)this.form_add_hidden_input(_.name,"");else{if(_.crop){if("image/jpeg"==_.mime)var n=this.hex_to_rgb(_.background_color);var c=document.createElement("canvas"),d=c.getContext("2d");c.width=_.canvas_element.width,c.height=_.canvas_element.height,d.drawImage(_.canvas_element,0,0);var l,h,f,m=c.width,p=c.height,v={x:[],y:[]},u=d.getImageData(0,0,c.width,c.height);for(h=0;h<p;h++)for(l=0;l<m;l++)f=4*(h*m+l),"image/jpeg"==_.mime?u.data[f]==n.r&&u.data[f+1]==n.g&&u.data[f+2]==n.b||(v.x.push(l),v.y.push(h)):u.data[f+3]>0&&(v.x.push(l),v.y.push(h));v.x.sort(function(e,t){return e-t}),v.y.sort(function(e,t){return e-t});var b=v.x.length-1;if(m=v.x[b]-v.x[0],p=v.y[b]-v.y[0],m>0&&p>0){var g=d.getImageData(v.x[0],v.y[0],m,p);c.width=m,c.height=p,d.putImageData(g,0,0);var j=c.toDataURL(_.mime)}else j=_.signature.toDataURL(_.mime)}else j=_.signature.toDataURL(_.mime);this.form_add_hidden_input(_.name,j)}}var w=[];if(this.conditional_actions_changed)for(var y in!a&&this.conditional_actions_run_save.length>0&&(w=this.conditional_actions_run_save),a&&this.conditional_actions_run_submit.length>0&&(w=this.conditional_actions_run_submit),w)if(w.hasOwnProperty(y)){t=w[y];w.indexOf(t)==y&&this.form_add_hidden_input("wsf_actions_run[]",t)}if(this.log(a?"log_form_submit":"log_form_save"),0==t&&!1===this.form_ajax)return i.trigger(e+"-complete"),void i.trigger("complete");i.trigger("submit-before-ajax");var k=new FormData(this.form_obj[0]);this.api_call("submit","POST",k,function(t){i.recaptcha_reset();var r=void 0!==t.error_validation&&t.error_validation,o=void 0!==t.data&&void 0!==t.data.errors&&t.data.errors.length,s=void 0===t.data||"save"==e||r||o;if(i.form_post_unlock("progress",!s,s),!a||r||o||(i.form_hash_clear(),i.get_object_meta_value(i.form,"submit_reload",!0)&&i.form_reload()),o&&i.get_object_meta_value(i.form,"submit_show_errors",!0))for(var _ in t.data.errors)if(t.data.errors.hasOwnProperty(_)){var n=t.data.errors[_];i.action_message(n,"danger","after",4e3,!1,!1,!1,!1,!0)}return i.trigger(e+"-complete"),i.trigger("complete"),!o},function(t){i.form_post_unlock("progress",!0,!0),i.recaptcha_reset(),void 0!==t.error_message&&i.action_message(t.error_message,"danger","after",4e3,!1,!1,!1,!1,!0),i.trigger(e+"-error"),i.trigger("error")},t>0)},$.WS_Form.prototype.form_post_lock=function(e,t,a){if(void 0===e)e="progress";if(void 0===t);if(void 0===a)a=!1;this.form_obj.hasClass("wsf-form-post-lock")||(t||this.get_object_meta_value(this.form,"submit_lock",!1))&&(a&&(this.form_ecommerce_calculate_enabled=!1),this.form_obj.addClass("wsf-form-post-lock"+(e?" wsf-form-post-lock-"+e:"")),$('button[type="submit"].wsf-button, input[type="submit"].wsf-button, button[data-action="wsf-save"].wsf-button, button[data-ecommerce-payment].wsf-button, [data-post-lock]',this.form_canvas_obj).attr("disabled",""),this.form_post_locked=!0,this.trigger("lock"),this.log("log_submit_lock","","duplicate-protect"))},$.WS_Form.prototype.form_post_unlock=function(e,t,a){if(void 0===e)e="progress";if(void 0===t)t=!0;if(void 0===a)a=!1;if(this.form_obj.hasClass("wsf-form-post-lock")){var i=this,r=function(){i.form_ecommerce_calculate_enabled=!0,i.form_obj.removeClass("wsf-form-post-lock"+(e?" wsf-form-post-lock-"+e:"")),$('button[type="submit"].wsf-button, input[type="submit"].wsf-button, button[data-action="wsf-save"].wsf-button, button[data-ecommerce-payment].wsf-button, [data-post-lock]',i.form_canvas_obj).removeAttr("disabled"),i.form_post_locked=!1,i.api_call_progress_reset(),i.trigger("unlock"),i.log("log_submit_unlock","","duplicate-protect")};(a||this.get_object_meta_value(this.form,"submit_unlock",!1))&&(t?setTimeout(function(){r()},1e3):r())}},$.WS_Form.prototype.api_call=function(e,t,a,i,r,o){if(void 0===t)t="POST";if(!a)a=new FormData;if(void 0===o)o=!1;var s=this;if($.WS_Form.debug_rendered)var _=new Date;var n=o?ws_form_settings.url+e:"submit"==e?this.form_obj.attr("action"):ws_form_settings.url+e;if(!o&&this.form_action_custom&&("submit"==e||"save"==e))return this.form_obj.off("submit"),this.form_obj.submit(),!0;var c=!0===ws_form_settings.ajax_http_method_override;if(null===a.get(ws_form_settings.wsf_nonce_field_name)&&a.append(ws_form_settings.wsf_nonce_field_name,ws_form_settings.wsf_nonce),"GET"===t){for(var d={},l=a.entries(),h=l.next();!h.done;){var f=h.value;d[f[0]]=f[1],h=l.next()}a=d}var m={method:c?"POST":t,url:n,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",ws_form_settings.x_wp_nonce),c&&e.setRequestHeader("X-HTTP-Method-Override",t)},contentType:!1,processData:"GET"===t,statusCode:{200:function(e){if(s.api_call_hash(e)&&$.WS_Form.debug_rendered){var t=new Date-_;s.debug_info("debug_info_submit_count",e.data.count),s.debug_info("debug_info_submit_duration_user",s.get_nice_duration(e.data.submit_duration_user)),s.debug_info("debug_info_submit_duration_client",t+" ms"),s.debug_info("debug_info_submit_duration_server",e.data.submit_duration_server+" ms")}if($.WS_Form.debug_rendered&&void 0!==e.data){if("object"==typeof e.data.logs)for(var a in e.data.logs)e.data.logs.hasOwnProperty(a)&&s.log("log_action",e.data.logs[a],"action");if("object"==typeof e.data.errors)for(var r in e.data.errors)e.data.errors.hasOwnProperty(r)&&s.error("error_action",e.data.errors[r],"action")}var o=void 0===i||i(e);void 0!==e.data&&o&&(void 0!==e.data.x_wp_nonce&&(ws_form_settings.x_wp_nonce=e.data.x_wp_nonce),"object"==typeof e.data.js&&s.action_js_init(e.data.js))},400:function(e){var t=e.responseJSON;t.error&&s.error("error_bad_request",t.error_message),void 0!==r&&r(t)},403:function(e){var t=e.responseJSON;s.error("error_forbidden",n),void 0!==r&&r(t)},404:function(e){var t=e.responseJSON;s.error("error_not_found",n),void 0!==r&&r(t)},500:function(e){var t=e.responseJSON;s.error("error_server",n),void 0!==r&&r(t)}}};!1!==a&&(m.data=a);var p=$('[data-source="post_progress"]',this.form_canvas_obj);return p.length&&(m.xhr=function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){s.api_call_progress(p,e)},!1),e.addEventListener("progress",function(e){s.api_call_progress(p,e)},!1),e}),$.ajax(m),this},$.WS_Form.prototype.api_call_progress=function(e,t){if(t.lengthComputable){var a=this;e.each(function(){var e=t.loaded/t.total*100;a.form_progress_set_value($(this),Math.round(e))})}},$.WS_Form.prototype.api_call_progress_reset=function(){var e=this;$('[data-progress-bar][data-source="post_progress"]',this.form_canvas_obj).each(function(){e.form_progress_set_value($(this),0)})},$.WS_Form.prototype.action_js_init=function(e){this.trigger("actions-start"),this.action_js=e,this.action_js_process_next()},$.WS_Form.prototype.action_js_process_next=function(){if(0==this.action_js.length)return this.trigger("actions-finish"),!1;var e=this.action_js.shift(),t=this.js_action_get_parameter(e,"action"),a=this.js_action_get_parameter(e,"duration");switch(t){case"redirect":!1!==this.js_action_get_parameter(e,"url")&&(location.href=e.url);break;case"message":var i=this.js_action_get_parameter(e,"message"),r=this.js_action_get_parameter(e,"type"),o=this.js_action_get_parameter(e,"method"),s=(a=this.js_action_get_parameter(e,"duration"),this.js_action_get_parameter(e,"form_hide")),_=this.js_action_get_parameter(e,"clear"),n=this.js_action_get_parameter(e,"scroll_top"),c=this.js_action_get_parameter(e,"scroll_top_offset"),d=this.js_action_get_parameter(e,"scroll_top_duration"),l=this.js_action_get_parameter(e,"form_show"),h=this.js_action_get_parameter(e,"message_hide");this.action_message(i,r,o,a,s,_,n,c,d,l,h);break;case"conversion":r=this.js_action_get_parameter(e,"type");var f=this.js_action_get_parameter(e,"parse_values");this.action_conversion(r,f);break;case"javascript":var m=this.js_action_get_parameter(e,"javascript");this.action_javascript(m);break;case"field_invalid_feedback":var p=this.js_action_get_parameter(e,"field_id"),v=this.js_action_get_parameter(e,"invalid_feedback"),u=$("#"+this.form_id_prefix+"field-"+p,this.form_canvas_obj),b=$("#"+this.form_id_prefix+"invalid-feedback-"+p,this.form_canvas_obj);this.set_invalid_feedback(u,b,v,p);var g=this;u.one("change input keyup",function(){var e=$(this).closest("[data-id]").attr("data-id"),t=$("#"+g.form_id_prefix+"invalid-feedback-"+e,this.form_canvas_obj);g.set_invalid_feedback($(this),t,"",e)});break;default:this.action_js_process_next()}},$.WS_Form.prototype.js_action_get_parameter=function(e,t){return void 0!==e[t]&&e[t]},$.WS_Form.prototype.get_framework_config_value=function(e,t){return void 0===this.framework[e]?(this.error("error_api_call_framework_invalid"),!1):void 0===this.framework[e].public?(this.error("error_api_call_framework_invalid"),!1):void 0!==this.framework[e].public[t]&&this.framework[e].public[t]},$.WS_Form.prototype.action_message=function(e,t,a,i,r,o,s,_,n,c,d){if(void 0===t)t="information";if(void 0===a)a="before";if(void 0===i)i=0;if(void 0===r)r=!1;if(void 0===o)o=!0;if(void 0===s)s=!1;if(void 0===_)_=0;if(_=""==_?0:parseInt(_),void 0===n)n=0;if(void 0===c)c=!1;if(void 0===d)d=!1;var l=this.form_canvas_obj.offset().top-_;(i=parseInt(i))<0&&(i=0);var h=this.get_framework_config_value("message","mask_wrapper"),f=this.get_framework_config_value("message","types"),m=void 0!==(t=void 0!==f[t]&&f[t]).mask_wrapper_class&&t.mask_wrapper_class;switch(o&&$('[data-wsf-message][data-wsf-instance-id="'+this.form_instance_id+'"]').remove(),s){case"instant":case"on":$("html,body").scrollTop(l);break;case"smooth":n=""==n?0:parseInt(n),$("html,body").animate({scrollTop:l},n)}var p={message:e,mask_wrapper_class:m},v=$("<div/>",{html:this.mask_parse(h,p)});switch(v.attr("data-wsf-message",""),v.attr("data-wsf-instance-id",this.form_instance_id),r&&this.form_obj.hide(),a){case"before":v.insertBefore(this.form_obj);break;case"after":v.insertAfter(this.form_obj)}var u=this;setTimeout(function(){d&&v.remove(),c&&u.form_canvas_obj.show(),u.action_js_process_next()},parseInt(i))},$.WS_Form.prototype.action_conversion=function(e,t){if(void 0===e)return!1;if(void 0===$.WS_Form.analytics[e])return!1;if(void 0===$.WS_Form.analytics[e].functions)return!1;if(void 0!==this.analytics_function[e])var a=this.analytics_function[e];else a=Object.keys($.WS_Form.analytics[e].functions)[0];this.form_analytics_event_fire(e,a,t),this.action_js_process_next()},$.WS_Form.prototype.action_javascript=function(e){$.globalEval("(function($) {"+e+"})(jQuery);"),this.log("log_javascript","action"),this.action_js_process_next()},$.WS_Form.prototype.form_character_word_count=function(e){var t=this;if(void 0===e)e=this.form_canvas_obj;for(var a in this.field_data_cache)if(this.field_data_cache.hasOwnProperty(a)){var i=this.field_data_cache[a],r=this.get_object_meta_value(i,"help","",!1,!0),o=-1!==r.indexOf("#character_")||-1!==r.indexOf("#word_");if(this.has_object_meta_key(i,"min_length")||this.has_object_meta_key(i,"max_length")||this.has_object_meta_key(i,"min_length_words")||this.has_object_meta_key(i,"max_length_words")||o){if(!(s=$("#"+this.form_id_prefix+"field-"+a,e)).length)var s=$("[id^="+this.form_id_prefix+"field-"+a+"-]:not([data-init-char-word-count]):not(iframe)",e);s.each(function(){$(this).attr("data-init-char-word-count",""),t.form_character_word_count_process($(this))&&$(this).on("keyup change focus blur paste",function(){t.form_character_word_count_process($(this))})})}}},$.WS_Form.prototype.form_character_word_count_process=function(e){var t=e.closest("[data-type]"),a=t.attr("data-id"),i=t.attr("data-repeatable-index"),r=void 0!==i?"-repeat-"+i:"",o=this.field_data_cache[a],s=this.get_object_meta_value(o,"min_length","");s=parseInt(s)>0&&parseInt(s);var _=this.get_object_meta_value(o,"max_length","");_=parseInt(_)>0&&parseInt(_);var n=this.get_object_meta_value(o,"min_length_words","");n=parseInt(n)>0&&parseInt(n);var c=this.get_object_meta_value(o,"max_length_words","");c=parseInt(c)>0&&parseInt(c);var d=e.val(),l=d.length,h=!1!==_&&_-l;h<0&&(h=0);var f=this.get_word_count(d),m=!1!==c&&c-f;m<0&&(m=0);var p=!1,v=[];!1!==s&&l<s&&(v.push(this.language("error_min_length",s)),p=!0),!1!==_&&l>_&&(v.push(this.language("error_max_length",_)),p=!0),!1!==n&&f<n&&(v.push(this.language("error_min_length_words",n)),p=!0),!1!==c&&f>c&&(v.push(this.language("error_max_length_words",c)),p=!0);var u=e.closest("[data-id]").attr("data-id"),b=$("#"+this.form_id_prefix+"invalid-feedback-"+u+r,this.form_canvas_obj);(void 0!==e.attr("required")||d.length>0)&&p?this.set_invalid_feedback(e,b,v.join(" / "),u):this.set_invalid_feedback(e,b,"",u);var g=this.get_object_meta_value(o,"help","",!1,!0);if(-1===g.indexOf("#character_")&&-1===g.indexOf("#word_"))return!0;var j=this.language("character_singular"),w=this.language("character_plural"),y=this.language("word_singular"),k=this.language("word_plural"),x={character_count:l,character_count_label:1==l?j:w,character_remaining:!1!==h?h:"",character_remaining_label:1==h?j:w,character_min:!1!==s?s:"",character_min_label:!1!==s?1==s?j:w:"",character_max:!1!==_?_:"",character_max_label:!1!==_?1==_?j:w:"",word_count:f,word_count_label:1==f?y:k,word_remaining:!1!==m?m:"",word_remaining_label:1==m?y:k,word_min:!1!==n?n:"",word_min_label:!1!==n?1==n?y:k:"",word_max:!1!==c?c:"",word_max_label:!1!==c?1==c?y:k:""},S=this.mask_parse(g,x),F=this.form_id_prefix+"help-"+o.id+r;return $("#"+F,this.form_canvas_obj).html(S),!0},$.WS_Form.prototype.get_word_count=function(e){return 0==(e=e.trim()).length?0:e.trim().replace(/\s+/gi," ").split(" ").length},$.WS_Form.prototype.api_call_hash=function(e){var t=!0;return void 0===e.hash&&(t=!1),t&&32!=e.hash.length&&(t=!1),t&&this.hash_set(e.hash),t},$.WS_Form.prototype.hash_set=function(e,t){void 0===t&&(t=!1),e!=this.hash&&(this.hash=e,t=!0,this.log("log_hash_set",this.hash),$.WS_Form.debug_rendered&&this.debug_info("debug_info_hash",this.hash,"clear_hash")),t&&this.cookie_set("hash",this.hash)},$.WS_Form.prototype.generate_password=function(e){for(var t="",a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~`|}{[]\\:;?><,./-=",i=0;i<e;++i)t+=a.charAt(Math.floor(Math.random()*a.length));return t},$.WS_Form.prototype.form_stat=function(){ws_form_settings.stat&&this.form_stat_add_view()},$.WS_Form.prototype.form_stat_add_view=function(){$.ajax({method:"POST",url:ws_form_settings.url+"form/"+this.form_id+"/stat/add_view/"})},$(function(){window.wsf_form_instances=[],$(".wsf-form").each(function(){var e=$(this).attr("id"),t=$(this).attr("data-instance-id"),a=$(this).attr("data-id"),i=new $.WS_Form;window.wsf_form_instances[t]=i,i.render({obj:"#"+e,form_id:a})})})}(jQuery);